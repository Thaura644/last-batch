{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/jtm/dev/rn-chat-cu/screens/Chats.js\",\n  _this = this;\nimport React, { useState, useEffect } from \"react\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport ContactRow from '../components/ContactRow';\nimport Separator from \"../components/Separator\";\nimport { useNavigation } from '@react-navigation/native';\nimport { auth, database } from '../config/firebase';\nimport { collection, doc, where, query, onSnapshot, orderBy, setDoc, deleteDoc } from 'firebase/firestore';\nimport { Ionicons } from '@expo/vector-icons';\nimport { colors } from \"../config/constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar Chats = function Chats() {\n  var navigation = useNavigation();\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    chats = _useState2[0],\n    setChats = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    lastAccess = _useState6[0],\n    setLastAccess = _useState6[1];\n  var _useState7 = useState([]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    selectedItems = _useState8[0],\n    setSelectedItems = _useState8[1];\n  useEffect(function () {\n    var _auth$currentUser, _auth$currentUser2;\n    var collectionRef = collection(database, 'chats');\n    var q = query(collectionRef, where('users', \"array-contains\", {\n      email: auth == null ? void 0 : (_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.email,\n      name: auth == null ? void 0 : (_auth$currentUser2 = auth.currentUser) == null ? void 0 : _auth$currentUser2.displayName,\n      deletedFromChat: false\n    }), orderBy(\"lastUpdated\", \"desc\"));\n    var unsubscribe = onSnapshot(q, function (doc) {\n      if (doc.docs.length == 0) {\n        setLoading(false);\n      }\n      setChats(doc.docs);\n    });\n    if (selectedItems.length > 0) {\n      navigation.setOptions({\n        headerRight: function headerRight() {\n          return _jsxDEV(TouchableOpacity, {\n            style: styles.trashBin,\n            onPress: handleDeleteChat,\n            children: _jsxDEV(View, {\n              children: _jsxDEV(Ionicons, {\n                name: \"trash\",\n                size: 24,\n                color: colors.teal\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 37,\n                columnNumber: 29\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 36,\n              columnNumber: 25\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 21\n          }, _this);\n        },\n        headerLeft: function headerLeft() {\n          return _jsxDEV(Text, {\n            style: styles.itemCount,\n            children: selectedItems.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 21\n          }, _this);\n        }\n      });\n    } else {\n      navigation.setOptions({\n        headerRight: function headerRight() {},\n        headerLeft: function headerLeft() {}\n      });\n    }\n    return function () {\n      return unsubscribe();\n    };\n  }, [selectedItems]);\n  var handleChatName = function handleChatName(chat) {\n    var _auth$currentUser3, _auth$currentUser9;\n    if (chat.data().groupName) {\n      return chat.data().groupName;\n    } else if (auth != null && (_auth$currentUser3 = auth.currentUser) != null && _auth$currentUser3.displayName) {\n      var _auth$currentUser4, _auth$currentUser8;\n      if ((auth == null ? void 0 : (_auth$currentUser4 = auth.currentUser) == null ? void 0 : _auth$currentUser4.displayName) === chat.data().users[0].name) {\n        var _auth$currentUser5, _auth$currentUser6;\n        if ((auth == null ? void 0 : (_auth$currentUser5 = auth.currentUser) == null ? void 0 : _auth$currentUser5.displayName) === chat.data().users[0].name && (auth == null ? void 0 : (_auth$currentUser6 = auth.currentUser) == null ? void 0 : _auth$currentUser6.displayName) === chat.data().users[1].name) {\n          var _auth$currentUser7;\n          return (auth == null ? void 0 : (_auth$currentUser7 = auth.currentUser) == null ? void 0 : _auth$currentUser7.displayName) + '*(You)';\n        }\n        return chat.data().users[1].name;\n      } else if ((auth == null ? void 0 : (_auth$currentUser8 = auth.currentUser) == null ? void 0 : _auth$currentUser8.displayName) === chat.data().users[1].name) {\n        return chat.data().users[0].name;\n      }\n    } else if (auth != null && (_auth$currentUser9 = auth.currentUser) != null && _auth$currentUser9.email) {\n      var _auth$currentUser10, _auth$currentUser14;\n      if ((auth == null ? void 0 : (_auth$currentUser10 = auth.currentUser) == null ? void 0 : _auth$currentUser10.email) === chat.data().users[0].email) {\n        var _auth$currentUser11, _auth$currentUser12;\n        if ((auth == null ? void 0 : (_auth$currentUser11 = auth.currentUser) == null ? void 0 : _auth$currentUser11.email) === chat.data().users[0].email && (auth == null ? void 0 : (_auth$currentUser12 = auth.currentUser) == null ? void 0 : _auth$currentUser12.email) === chat.data().users[1].email) {\n          var _auth$currentUser13;\n          return (auth == null ? void 0 : (_auth$currentUser13 = auth.currentUser) == null ? void 0 : _auth$currentUser13.email) + '*(You)';\n        }\n        return chat.data().users[1].email;\n      } else if ((auth == null ? void 0 : (_auth$currentUser14 = auth.currentUser) == null ? void 0 : _auth$currentUser14.email) === chat.data().users[1].email) {\n        return chat.data().users[0].email;\n      }\n    } else {\n      return '~ No Name or Email ~';\n    }\n  };\n  var handleOnPress = function handleOnPress(chat) {\n    if (selectedItems.length) {\n      return selectItems(chat);\n    }\n    navigation.navigate('Chat', {\n      id: chat.id,\n      chatName: handleChatName(chat)\n    });\n  };\n  var handleLongPress = function handleLongPress(chat) {\n    selectItems(chat);\n  };\n  var selectItems = function selectItems(chat) {\n    if (selectedItems.includes(chat.id)) {\n      var newListItems = selectedItems.filter(function (listItem) {\n        return listItem !== chat.id;\n      });\n      return setSelectedItems(_toConsumableArray(newListItems));\n    }\n    setSelectedItems([].concat(_toConsumableArray(selectedItems), [chat.id]));\n  };\n  var getSelected = function getSelected(chat) {\n    return selectedItems.includes(chat.id);\n  };\n  var deSelectItems = function deSelectItems() {\n    setSelectedItems([]);\n  };\n  var handleFabPress = function handleFabPress() {\n    navigation.navigate('Users');\n  };\n  var handleDeleteChat = function handleDeleteChat() {\n    Alert.alert(selectedItems.length > 1 ? \"Delete selected chats?\" : \"Delete this chat?\", \"Messages will be removed from this device.\", [{\n      text: \"Delete chat\",\n      onPress: function onPress() {\n        selectedItems.map(function (chatId) {\n          var willUpdatedUsers = [];\n          chats.map(function (chat) {\n            if (chatId == chat.id) {\n              willUpdatedChat = chat;\n              chat.data().users.map(function (user) {\n                var _auth$currentUser15;\n                if (user.email == (auth == null ? void 0 : (_auth$currentUser15 = auth.currentUser) == null ? void 0 : _auth$currentUser15.email)) {\n                  willUpdatedUsers.push({\n                    email: user.email,\n                    name: user.name,\n                    deletedFromChat: true\n                  });\n                } else {\n                  willUpdatedUsers.push({\n                    email: user.email,\n                    name: user.name,\n                    deletedFromChat: user.deletedFromChat\n                  });\n                }\n              });\n            }\n          });\n          setDoc(doc(database, 'chats', chatId), {\n            users: willUpdatedUsers\n          }, {\n            merge: true\n          });\n          var deletedFromChatUsers = 0;\n          willUpdatedUsers.forEach(function (user) {\n            if (user.deletedFromChat) {\n              deletedFromChatUsers++;\n            }\n          });\n          if (willUpdatedUsers.length == deletedFromChatUsers) {\n            deleteDoc(doc(database, 'chats', chatId));\n          }\n        });\n        deSelectItems();\n      }\n    }, {\n      text: \"Cancel\"\n    }], {\n      cancelable: true\n    });\n  };\n  var handleSubtitle = function handleSubtitle(chat) {\n    if (chat.data().messages.length === 0) {\n      return \"No messages yet\";\n    } else {\n      if (chat.data().groupName != '') {\n        var _auth$currentUser16;\n        if ((auth == null ? void 0 : (_auth$currentUser16 = auth.currentUser) == null ? void 0 : _auth$currentUser16.email) == chat.data().messages[0].user._id) {\n          if (chat.data().messages[0].image && chat.data().messages[0].image != '') {\n            return 'You sent an image';\n          } else if (chat.data().messages[0].text.length > 20) {\n            return 'You: ' + chat.data().messages[0].text.substring(0, 20) + '...';\n          } else {\n            return 'You: ' + chat.data().messages[0].text.substring(0, 20);\n          }\n        } else {\n          var firstName = chat.data().messages[0].user.name.substring(0, chat.data().messages[0].user.name.indexOf(' '));\n          if (chat.data().messages[0].image && chat.data().messages[0].image != '') {\n            return firstName + ' sent an image';\n          } else if (chat.data().messages[0].text.length > 20) {\n            return firstName + ': ' + chat.data().messages[0].text.substring(0, 20) + '...';\n          } else {\n            return firstName + ': ' + chat.data().messages[0].text.substring(0, 20);\n          }\n        }\n      } else {\n        var _auth$currentUser17;\n        if ((auth == null ? void 0 : (_auth$currentUser17 = auth.currentUser) == null ? void 0 : _auth$currentUser17.email) == chat.data().messages[0].user._id) {\n          if (chat.data().messages[0].image && chat.data().messages[0].image != '') {\n            return 'You sent an image';\n          } else if (chat.data().messages[0].text.length > 20) {\n            return chat.data().messages[0].text.substring(0, 20) + '...';\n          } else {\n            return chat.data().messages[0].text.substring(0, 20);\n          }\n        } else {\n          var _firstName = chat.data().messages[0].user.name.substring(0, chat.data().messages[0].user.name.indexOf(' '));\n          if (chat.data().messages[0].image && chat.data().messages[0].image != '') {\n            return _firstName + ' sent an image';\n          } else if (chat.data().messages[0].text.length > 20) {\n            return chat.data().messages[0].text.substring(0, 20) + '...';\n          } else {\n            return chat.data().messages[0].text.substring(0, 20);\n          }\n        }\n      }\n    }\n  };\n  var handleSubtitle2 = function handleSubtitle2(chat) {\n    var options = {\n      year: '2-digit',\n      month: 'numeric',\n      day: 'numeric'\n    };\n    var timestemp = new Date(chat.data().lastUpdated);\n    var date = timestemp.toLocaleDateString(undefined, options);\n    return date;\n  };\n  return _jsxDEV(Pressable, {\n    style: styles.container,\n    onPress: deSelectItems,\n    children: [chats.length === 0 ? _jsxDEV(_Fragment, {\n      children: loading == true ? _jsxDEV(ActivityIndicator, {\n        size: \"large\",\n        style: styles.loadingContainer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 25\n      }, _this) : _jsxDEV(View, {\n        style: styles.blankContainer,\n        children: _jsxDEV(Text, {\n          style: styles.textContainer,\n          children: \"No conversations yet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 33\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 29\n      }, _this)\n    }, void 0, false) : _jsxDEV(ScrollView, {\n      children: [chats.map(function (chat) {\n        return _jsxDEV(React.Fragment, {\n          children: _jsxDEV(ContactRow, {\n            style: getSelected(chat) ? styles.selectedContactRow : \"\",\n            name: handleChatName(chat),\n            subtitle: handleSubtitle(chat),\n            subtitle2: handleSubtitle2(chat),\n            onPress: function onPress() {\n              return handleOnPress(chat);\n            },\n            onLongPress: function onLongPress() {\n              return handleLongPress(chat);\n            },\n            selected: getSelected(chat),\n            showForwardIcon: false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 29\n          }, _this)\n        }, chat.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 25\n        }, _this);\n      }), _jsxDEV(Separator, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 21\n      }, _this), _jsxDEV(View, {\n        style: styles.blankContainer,\n        children: _jsxDEV(Text, {\n          style: {\n            fontSize: 12,\n            fontWeight: 400,\n            marginRight: 15,\n            marginLeft: 15,\n            marginTop: 15,\n            marginBottom: 90\n          },\n          children: [_jsxDEV(Ionicons, {\n            name: \"lock-open\",\n            size: 12,\n            style: {\n              color: '#565656'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 29\n          }, _this), ' ', \"Your personal messages are not\", ' ', _jsxDEV(Text, {\n            style: {\n              color: colors.teal\n            },\n            children: \"end-to-end-encrypted\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 29\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 25\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 21\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 17\n    }, _this), _jsxDEV(TouchableOpacity, {\n      style: styles.fab,\n      onPress: handleFabPress,\n      children: _jsxDEV(View, {\n        style: styles.fabContainer,\n        children: _jsxDEV(Ionicons, {\n          name: \"chatbox-ellipses\",\n          size: 24,\n          color: 'white'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 247,\n    columnNumber: 9\n  }, _this);\n};\nvar styles = StyleSheet.create({\n  fab: {\n    position: 'absolute',\n    bottom: 12,\n    right: 12\n  },\n  fabContainer: {\n    width: 56,\n    height: 56,\n    backgroundColor: colors.teal,\n    borderRadius: 28,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  container: {\n    flex: 1\n  },\n  blankContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  textContainer: {\n    fontSize: 16\n  },\n  selectedContactRow: {\n    backgroundColor: '#E0E0E0'\n  },\n  trashBin: {\n    right: 12,\n    color: colors.teal\n  },\n  itemCount: {\n    left: 100,\n    color: colors.teal,\n    fontSize: 18,\n    fontWeight: 400\n  },\n  loadingContainer: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: colors.teal\n  }\n});\nexport default Chats;","map":{"version":3,"names":["React","useState","useEffect","SafeAreaView","StyleSheet","View","TouchableOpacity","Text","ScrollView","Pressable","BackHandler","Alert","ActivityIndicator","ContactRow","Separator","useNavigation","auth","database","collection","doc","where","query","onSnapshot","orderBy","setDoc","deleteDoc","Ionicons","colors","jsxDEV","_jsxDEV","Fragment","_Fragment","Chats","navigation","_useState","_useState2","_slicedToArray","chats","setChats","_useState3","_useState4","loading","setLoading","_useState5","_useState6","lastAccess","setLastAccess","_useState7","_useState8","selectedItems","setSelectedItems","_auth$currentUser","_auth$currentUser2","collectionRef","q","email","currentUser","name","displayName","deletedFromChat","unsubscribe","docs","length","setOptions","headerRight","style","styles","trashBin","onPress","handleDeleteChat","children","size","color","teal","fileName","_jsxFileName","lineNumber","columnNumber","_this","headerLeft","itemCount","handleChatName","chat","_auth$currentUser3","_auth$currentUser9","data","groupName","_auth$currentUser4","_auth$currentUser8","users","_auth$currentUser5","_auth$currentUser6","_auth$currentUser7","_auth$currentUser10","_auth$currentUser14","_auth$currentUser11","_auth$currentUser12","_auth$currentUser13","handleOnPress","selectItems","navigate","id","chatName","handleLongPress","includes","newListItems","filter","listItem","_toConsumableArray","concat","getSelected","deSelectItems","handleFabPress","alert","text","map","chatId","willUpdatedUsers","willUpdatedChat","user","_auth$currentUser15","push","merge","deletedFromChatUsers","forEach","cancelable","handleSubtitle","messages","_auth$currentUser16","_id","image","substring","firstName","indexOf","_auth$currentUser17","handleSubtitle2","options","year","month","day","timestemp","Date","lastUpdated","date","toLocaleDateString","undefined","container","loadingContainer","blankContainer","textContainer","selectedContactRow","subtitle","subtitle2","onLongPress","selected","showForwardIcon","fontSize","fontWeight","marginRight","marginLeft","marginTop","marginBottom","fab","fabContainer","create","position","bottom","right","width","height","backgroundColor","borderRadius","justifyContent","alignItems","flex","left"],"sources":["/home/jtm/dev/rn-chat-cu/screens/Chats.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { SafeAreaView, StyleSheet, View, TouchableOpacity, Text, ScrollView, Pressable, BackHandler, Alert, ActivityIndicator } from \"react-native\";\nimport ContactRow from '../components/ContactRow';\nimport Separator from \"../components/Separator\";\nimport { useNavigation } from '@react-navigation/native';\nimport { auth, database } from '../config/firebase';\nimport { collection, doc, where, query, onSnapshot, orderBy, setDoc, deleteDoc } from 'firebase/firestore';\nimport { Ionicons } from '@expo/vector-icons'\nimport { colors } from \"../config/constants\";\n\nconst Chats = () => {\n    const navigation = useNavigation();\n    const [chats, setChats] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [lastAccess, setLastAccess] = useState([]);\n    const [selectedItems, setSelectedItems] = useState([]);\n\n    useEffect(() => {\n        const collectionRef = collection(database, 'chats');\n        const q = query(collectionRef,\n            where('users', \"array-contains\", { email: auth?.currentUser?.email, name: auth?.currentUser?.displayName, deletedFromChat: false }),\n            orderBy(\"lastUpdated\", \"desc\")\n        );\n        const unsubscribe = onSnapshot(q, (doc) => {\n            if (doc.docs.length == 0) {\n                setLoading(false);\n            }\n            setChats(doc.docs);\n        });\n\n        // DELETE BUTTON \n        if (selectedItems.length > 0) {\n            navigation.setOptions({\n                headerRight: () => (\n                    <TouchableOpacity style={styles.trashBin} onPress={handleDeleteChat}>\n                        <View>\n                            <Ionicons name=\"trash\" size={24} color={colors.teal} />\n                        </View>\n                    </TouchableOpacity>\n                ),\n                headerLeft: () => (\n                    <Text style={styles.itemCount}>\n                        {selectedItems.length}\n                    </Text>\n                ),\n            });\n        } else {\n            navigation.setOptions({\n                headerRight: () => { },\n                headerLeft: () => { },\n            },\n            );\n        }\n\n        return () => unsubscribe();\n    }, [selectedItems]);\n\n    \n    const handleChatName = (chat) => {\n        if (chat.data().groupName) {\n            return chat.data().groupName;\n        } else if (auth?.currentUser?.displayName) {\n            if (auth?.currentUser?.displayName === chat.data().users[0].name) {\n                //For 'message yourself'\n                if (auth?.currentUser?.displayName === chat.data().users[0].name && auth?.currentUser?.displayName === chat.data().users[1].name) {\n                    return auth?.currentUser?.displayName + '*(You)';\n                }\n                return chat.data().users[1].name;\n            } else if (auth?.currentUser?.displayName === chat.data().users[1].name) {\n                return chat.data().users[0].name;\n            }\n        } else if (auth?.currentUser?.email) {\n            if (auth?.currentUser?.email === chat.data().users[0].email) {\n                //For 'message yourself'\n                if (auth?.currentUser?.email === chat.data().users[0].email && auth?.currentUser?.email === chat.data().users[1].email) {\n                    return auth?.currentUser?.email + '*(You)';\n                }\n                return chat.data().users[1].email;\n            } else if (auth?.currentUser?.email === chat.data().users[1].email) {\n                return chat.data().users[0].email;\n            }\n        } else {\n            return '~ No Name or Email ~';\n        }\n    }\n\n    const handleOnPress = (chat) => {\n        if (selectedItems.length) {\n            return selectItems(chat)\n        }\n        navigation.navigate('Chat', { id: chat.id, chatName: handleChatName(chat) })\n\n        //TODO CHECK THIS\n        // //SET LAST ACCESS TO CHAT FOR EACH USER\n        // onSnapshot(doc(database, 'chats', chat.id), (doc) => {\n        //     setLastAccess(doc.data().lastAccess.map((user) => ({\n        //         email: user.email,\n        //         date: auth?.currentUser?.email == user.email ? Date.now() : user.date,\n        //     })));\n        // });\n\n\n        // if (lastAccess.length > 0) {\n        //     setDoc(doc(database, 'chats', chat.id), { lastAccess: lastAccess, }, { merge: true });\n        // }\n    }\n\n    const handleLongPress = (chat) => {\n        selectItems(chat);\n    }\n\n    const selectItems = (chat) => {\n        if (selectedItems.includes(chat.id)) {\n            const newListItems = selectedItems.filter(\n                listItem => listItem !== chat.id,\n            );\n            return setSelectedItems([...newListItems]);\n        }\n        setSelectedItems([...selectedItems, chat.id]);\n    }\n\n    const getSelected = (chat) => {\n        return selectedItems.includes(chat.id);\n    }\n\n    const deSelectItems = () => {\n        setSelectedItems([]);\n    };\n\n    const handleFabPress = () => {\n        navigation.navigate('Users');\n    }\n\n    const handleDeleteChat = () => {\n        Alert.alert(\n            selectedItems.length > 1 ? \"Delete selected chats?\" : \"Delete this chat?\",\n            \"Messages will be removed from this device.\",\n            [\n                // The \"Yes\" button\n                {\n                    text: \"Delete chat\",\n                    onPress: () => {\n                        //Find the willUpdatedUsers\n                        selectedItems.map((chatId) => {\n                            let willUpdatedUsers = [];\n                            chats.map(chat => {\n                                if (chatId == chat.id) {\n\n                                    willUpdatedChat = chat;\n                                    chat.data().users.map(user => {\n                                        if (user.email == auth?.currentUser?.email) {\n                                            willUpdatedUsers.push({ email: user.email, name: user.name, deletedFromChat: true })\n                                        } else {\n                                            willUpdatedUsers.push({ email: user.email, name: user.name, deletedFromChat: user.deletedFromChat })\n                                        }\n                                    })\n                                }\n                            })\n                            //Remove the current user from chat\n                            setDoc(doc(database, 'chats', chatId), {\n                                users: willUpdatedUsers\n                            }, { merge: true });\n                            //if nobody left in chat, delete the entire chat\n                            let deletedFromChatUsers = 0;\n                            willUpdatedUsers.forEach(user => {\n                                if (user.deletedFromChat) {\n                                    deletedFromChatUsers++;\n                                }\n                            })\n                            if (willUpdatedUsers.length == deletedFromChatUsers) {\n                                deleteDoc(doc(database, 'chats', chatId))\n                            }\n                        });\n                        deSelectItems();\n                    },\n                },\n                // The \"Cancel\" button\n                // Does nothing but dismiss the dialog when tapped\n                {\n                    text: \"Cancel\",\n                },\n            ],\n            { cancelable: true }\n        );\n    }\n\n    const handleSubtitle = (chat) => {\n        if (chat.data().messages.length === 0) {\n            return \"No messages yet\";\n        } else {\n            if (chat.data().groupName != '') { //It is group chat\n                if (auth?.currentUser?.email == chat.data().messages[0].user._id) { //Yours message\n                    //Check lenght of the last message and add three dot...\n                    if (chat.data().messages[0].image && chat.data().messages[0].image != '') {\n                        return 'You sent an image';\n                    } else if (chat.data().messages[0].text.length > 20) {\n                        return 'You: ' + chat.data().messages[0].text.substring(0, 20) + '...';\n                    } else {\n                        return 'You: ' + chat.data().messages[0].text.substring(0, 20);\n                    }\n                } else {//Others message\n                    //Get first name\n                    const firstName = chat.data().messages[0].user.name.substring(0, chat.data().messages[0].user.name.indexOf(' '));\n                    //Check lenght of the last message and add three dot...\n                    if (chat.data().messages[0].image && chat.data().messages[0].image != '') {\n                        return firstName + ' sent an image';\n                    } else if (chat.data().messages[0].text.length > 20) {\n                        return firstName + ': ' + chat.data().messages[0].text.substring(0, 20) + '...';\n                    } else {\n                        return firstName + ': ' + chat.data().messages[0].text.substring(0, 20);\n                    }\n                }\n            } else { //It is not group chat\n                if (auth?.currentUser?.email == chat.data().messages[0].user._id) { //Yours message\n                    //Check lenght of the last message and add three dot...\n                    if (chat.data().messages[0].image && chat.data().messages[0].image != '') {\n                        return 'You sent an image';\n                    } else if (chat.data().messages[0].text.length > 20) {\n                        return chat.data().messages[0].text.substring(0, 20) + '...';\n                    } else {\n                        return chat.data().messages[0].text.substring(0, 20);\n                    }\n                } else {//Others message\n                    //Get first name\n                    const firstName = chat.data().messages[0].user.name.substring(0, chat.data().messages[0].user.name.indexOf(' '));\n                    //Check lenght of the last message and add three dot...\n                    if (chat.data().messages[0].image && chat.data().messages[0].image != '') {\n                        return firstName + ' sent an image';\n                    } else if (chat.data().messages[0].text.length > 20) {\n                        return chat.data().messages[0].text.substring(0, 20) + '...';\n                    } else {\n                        return chat.data().messages[0].text.substring(0, 20);\n                    }\n                }\n            }\n        }\n    }\n\n    const handleSubtitle2 = (chat) => {\n        const options = { year: '2-digit', month: 'numeric', day: 'numeric' };\n        const timestemp = new Date(chat.data().lastUpdated);\n        const date = timestemp.toLocaleDateString(undefined, options);\n        return date;\n    }\n\n    return (\n        <Pressable style={styles.container} onPress={deSelectItems}>\n            {chats.length === 0 ? (\n                <>\n                    {loading == true ? (\n                        <ActivityIndicator size='large' style={styles.loadingContainer} />\n                    ) :\n                        (\n                            <View style={styles.blankContainer}>\n                                <Text style={styles.textContainer}>\n                                    No conversations yet\n                                </Text>\n                            </View>\n                        )\n                    }\n                </>\n            ) : (\n                <ScrollView >\n                    {chats.map(chat => (\n                        <React.Fragment key={chat.id}>\n                            <ContactRow style={getSelected(chat) ? styles.selectedContactRow : \"\"}\n                                name={handleChatName(chat)}\n                                subtitle={handleSubtitle(chat)}\n                                subtitle2={handleSubtitle2(chat)}\n                                onPress={() => handleOnPress(chat)}\n                                onLongPress={() => handleLongPress(chat)}\n                                selected={getSelected(chat)}\n                                showForwardIcon={false}\n                            />\n                        </React.Fragment>\n                    ))}\n                    <Separator />\n                    <View style={styles.blankContainer} >\n                        <Text style={{ fontSize: 12, fontWeight: 400, marginRight: 15, marginLeft: 15, marginTop: 15, marginBottom: 90 }}>\n                            <Ionicons name=\"lock-open\" size={12} style={{ color: '#565656' }} />\n                            {' '}Your personal messages are not{' '}\n                            <Text style={{ color: colors.teal }}>\n                                end-to-end-encrypted\n                            </Text>\n                        </Text>\n                    </View>\n                </ScrollView>\n            )}\n\n            <TouchableOpacity style={styles.fab} onPress={handleFabPress}>\n                <View style={styles.fabContainer}>\n                    <Ionicons name=\"chatbox-ellipses\" size={24} color={'white'} />\n                </View>\n            </TouchableOpacity>\n        </Pressable>\n    )\n}\n\nconst styles = StyleSheet.create({\n    fab: {\n        position: 'absolute',\n        bottom: 12,\n        right: 12\n    },\n    fabContainer: {\n        width: 56,\n        height: 56,\n        backgroundColor: colors.teal,\n        borderRadius: 28,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    container: {\n        flex: 1\n    },\n    blankContainer: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    textContainer: {\n        fontSize: 16\n    },\n    selectedContactRow: {\n        backgroundColor: '#E0E0E0'\n    },\n    trashBin: {\n        right: 12,\n        color: colors.teal,\n    },\n    itemCount: {\n        left: 100,\n        color: colors.teal,\n        fontSize: 18,\n        fontWeight: 400,\n    },\n    loadingContainer: {\n        flex: 1,\n        alignItems: 'center',\n        justifyContent: 'center',\n        color: colors.teal\n    }\n})\nexport default Chats;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}