{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from \"react\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport ContactRow from \"../components/ContactRow\";\nimport Separator from \"../components/Separator\";\nimport { useNavigation } from '@react-navigation/native';\nimport { auth, database } from \"../config/firebase\";\nimport { collection, doc, where, query, onSnapshot, orderBy, setDoc, deleteDoc } from 'firebase/firestore';\nimport { Ionicons } from '@expo/vector-icons';\nimport { colors } from \"../config/constants\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Chats = function Chats() {\n  var navigation = useNavigation();\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    chats = _useState2[0],\n    setChats = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    lastAccess = _useState6[0],\n    setLastAccess = _useState6[1];\n  var _useState7 = useState([]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    selectedItems = _useState8[0],\n    setSelectedItems = _useState8[1];\n  useEffect(function () {\n    var _auth$currentUser, _auth$currentUser2;\n    var collectionRef = collection(database, 'chats');\n    var q = query(collectionRef, where('users', \"array-contains\", {\n      email: auth == null ? void 0 : (_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.email,\n      name: auth == null ? void 0 : (_auth$currentUser2 = auth.currentUser) == null ? void 0 : _auth$currentUser2.displayName,\n      deletedFromChat: false\n    }), orderBy(\"lastUpdated\", \"desc\"));\n    var unsubscribe = onSnapshot(q, function (doc) {\n      if (doc.docs.length == 0) {\n        setLoading(false);\n      }\n      setChats(doc.docs);\n    });\n    if (selectedItems.length > 0) {\n      navigation.setOptions({\n        headerRight: function headerRight() {\n          return _jsx(TouchableOpacity, {\n            style: styles.trashBin,\n            onPress: handleDeleteChat,\n            children: _jsx(View, {\n              children: _jsx(Ionicons, {\n                name: \"trash\",\n                size: 24,\n                color: colors.teal\n              })\n            })\n          });\n        },\n        headerLeft: function headerLeft() {\n          return _jsx(Text, {\n            style: styles.itemCount,\n            children: selectedItems.length\n          });\n        }\n      });\n    } else {\n      navigation.setOptions({\n        headerRight: function headerRight() {},\n        headerLeft: function headerLeft() {}\n      });\n    }\n    return function () {\n      return unsubscribe();\n    };\n  }, [selectedItems]);\n  var handleChatName = function handleChatName(chat) {\n    var _auth$currentUser3, _auth$currentUser9;\n    if (chat.data().groupName) {\n      return chat.data().groupName;\n    } else if (auth != null && (_auth$currentUser3 = auth.currentUser) != null && _auth$currentUser3.displayName) {\n      var _auth$currentUser4, _auth$currentUser8;\n      if ((auth == null ? void 0 : (_auth$currentUser4 = auth.currentUser) == null ? void 0 : _auth$currentUser4.displayName) === chat.data().users[0].name) {\n        var _auth$currentUser5, _auth$currentUser6;\n        if ((auth == null ? void 0 : (_auth$currentUser5 = auth.currentUser) == null ? void 0 : _auth$currentUser5.displayName) === chat.data().users[0].name && (auth == null ? void 0 : (_auth$currentUser6 = auth.currentUser) == null ? void 0 : _auth$currentUser6.displayName) === chat.data().users[1].name) {\n          var _auth$currentUser7;\n          return (auth == null ? void 0 : (_auth$currentUser7 = auth.currentUser) == null ? void 0 : _auth$currentUser7.displayName) + '*(You)';\n        }\n        return chat.data().users[1].name;\n      } else if ((auth == null ? void 0 : (_auth$currentUser8 = auth.currentUser) == null ? void 0 : _auth$currentUser8.displayName) === chat.data().users[1].name) {\n        return chat.data().users[0].name;\n      }\n    } else if (auth != null && (_auth$currentUser9 = auth.currentUser) != null && _auth$currentUser9.email) {\n      var _auth$currentUser10, _auth$currentUser14;\n      if ((auth == null ? void 0 : (_auth$currentUser10 = auth.currentUser) == null ? void 0 : _auth$currentUser10.email) === chat.data().users[0].email) {\n        var _auth$currentUser11, _auth$currentUser12;\n        if ((auth == null ? void 0 : (_auth$currentUser11 = auth.currentUser) == null ? void 0 : _auth$currentUser11.email) === chat.data().users[0].email && (auth == null ? void 0 : (_auth$currentUser12 = auth.currentUser) == null ? void 0 : _auth$currentUser12.email) === chat.data().users[1].email) {\n          var _auth$currentUser13;\n          return (auth == null ? void 0 : (_auth$currentUser13 = auth.currentUser) == null ? void 0 : _auth$currentUser13.email) + '*(You)';\n        }\n        return chat.data().users[1].email;\n      } else if ((auth == null ? void 0 : (_auth$currentUser14 = auth.currentUser) == null ? void 0 : _auth$currentUser14.email) === chat.data().users[1].email) {\n        return chat.data().users[0].email;\n      }\n    } else {\n      return '~ No Name or Email ~';\n    }\n  };\n  var handleOnPress = function handleOnPress(chat) {\n    if (selectedItems.length) {\n      return selectItems(chat);\n    }\n    navigation.navigate('Chat', {\n      id: chat.id,\n      chatName: handleChatName(chat)\n    });\n  };\n  var handleLongPress = function handleLongPress(chat) {\n    selectItems(chat);\n  };\n  var selectItems = function selectItems(chat) {\n    if (selectedItems.includes(chat.id)) {\n      var newListItems = selectedItems.filter(function (listItem) {\n        return listItem !== chat.id;\n      });\n      return setSelectedItems(_toConsumableArray(newListItems));\n    }\n    setSelectedItems([].concat(_toConsumableArray(selectedItems), [chat.id]));\n  };\n  var getSelected = function getSelected(chat) {\n    return selectedItems.includes(chat.id);\n  };\n  var deSelectItems = function deSelectItems() {\n    setSelectedItems([]);\n  };\n  var handleFabPress = function handleFabPress() {\n    navigation.navigate('Users');\n  };\n  var handleDeleteChat = function handleDeleteChat() {\n    Alert.alert(selectedItems.length > 1 ? \"Delete selected chats?\" : \"Delete this chat?\", \"Messages will be removed from this device.\", [{\n      text: \"Delete chat\",\n      onPress: function onPress() {\n        selectedItems.map(function (chatId) {\n          var willUpdatedUsers = [];\n          chats.map(function (chat) {\n            if (chatId == chat.id) {\n              willUpdatedChat = chat;\n              chat.data().users.map(function (user) {\n                var _auth$currentUser15;\n                if (user.email == (auth == null ? void 0 : (_auth$currentUser15 = auth.currentUser) == null ? void 0 : _auth$currentUser15.email)) {\n                  willUpdatedUsers.push({\n                    email: user.email,\n                    name: user.name,\n                    deletedFromChat: true\n                  });\n                } else {\n                  willUpdatedUsers.push({\n                    email: user.email,\n                    name: user.name,\n                    deletedFromChat: user.deletedFromChat\n                  });\n                }\n              });\n            }\n          });\n          setDoc(doc(database, 'chats', chatId), {\n            users: willUpdatedUsers\n          }, {\n            merge: true\n          });\n          var deletedFromChatUsers = 0;\n          willUpdatedUsers.forEach(function (user) {\n            if (user.deletedFromChat) {\n              deletedFromChatUsers++;\n            }\n          });\n          if (willUpdatedUsers.length == deletedFromChatUsers) {\n            deleteDoc(doc(database, 'chats', chatId));\n          }\n        });\n        deSelectItems();\n      }\n    }, {\n      text: \"Cancel\"\n    }], {\n      cancelable: true\n    });\n  };\n  var handleSubtitle = function handleSubtitle(chat) {\n    if (chat.data().messages.length === 0) {\n      return \"No messages yet\";\n    } else {\n      if (chat.data().groupName != '') {\n        var _auth$currentUser16;\n        if ((auth == null ? void 0 : (_auth$currentUser16 = auth.currentUser) == null ? void 0 : _auth$currentUser16.email) == chat.data().messages[0].user._id) {\n          if (chat.data().messages[0].image && chat.data().messages[0].image != '') {\n            return 'You sent an image';\n          } else if (chat.data().messages[0].text.length > 20) {\n            return 'You: ' + chat.data().messages[0].text.substring(0, 20) + '...';\n          } else {\n            return 'You: ' + chat.data().messages[0].text.substring(0, 20);\n          }\n        } else {\n          var firstName = chat.data().messages[0].user.name.substring(0, chat.data().messages[0].user.name.indexOf(' '));\n          if (chat.data().messages[0].image && chat.data().messages[0].image != '') {\n            return firstName + ' sent an image';\n          } else if (chat.data().messages[0].text.length > 20) {\n            return firstName + ': ' + chat.data().messages[0].text.substring(0, 20) + '...';\n          } else {\n            return firstName + ': ' + chat.data().messages[0].text.substring(0, 20);\n          }\n        }\n      } else {\n        var _auth$currentUser17;\n        if ((auth == null ? void 0 : (_auth$currentUser17 = auth.currentUser) == null ? void 0 : _auth$currentUser17.email) == chat.data().messages[0].user._id) {\n          if (chat.data().messages[0].image && chat.data().messages[0].image != '') {\n            return 'You sent an image';\n          } else if (chat.data().messages[0].text.length > 20) {\n            return chat.data().messages[0].text.substring(0, 20) + '...';\n          } else {\n            return chat.data().messages[0].text.substring(0, 20);\n          }\n        } else {\n          var _firstName = chat.data().messages[0].user.name.substring(0, chat.data().messages[0].user.name.indexOf(' '));\n          if (chat.data().messages[0].image && chat.data().messages[0].image != '') {\n            return _firstName + ' sent an image';\n          } else if (chat.data().messages[0].text.length > 20) {\n            return chat.data().messages[0].text.substring(0, 20) + '...';\n          } else {\n            return chat.data().messages[0].text.substring(0, 20);\n          }\n        }\n      }\n    }\n  };\n  var handleSubtitle2 = function handleSubtitle2(chat) {\n    var options = {\n      year: '2-digit',\n      month: 'numeric',\n      day: 'numeric'\n    };\n    var timestemp = new Date(chat.data().lastUpdated);\n    var date = timestemp.toLocaleDateString(undefined, options);\n    return date;\n  };\n  return _jsxs(Pressable, {\n    style: styles.container,\n    onPress: deSelectItems,\n    children: [chats.length === 0 ? _jsx(_Fragment, {\n      children: loading == true ? _jsx(ActivityIndicator, {\n        size: \"large\",\n        style: styles.loadingContainer\n      }) : _jsx(View, {\n        style: styles.blankContainer,\n        children: _jsx(Text, {\n          style: styles.textContainer,\n          children: \"No conversations yet\"\n        })\n      })\n    }) : _jsxs(ScrollView, {\n      children: [chats.map(function (chat) {\n        return _jsx(React.Fragment, {\n          children: _jsx(ContactRow, {\n            style: getSelected(chat) ? styles.selectedContactRow : \"\",\n            name: handleChatName(chat),\n            subtitle: handleSubtitle(chat),\n            subtitle2: handleSubtitle2(chat),\n            onPress: function onPress() {\n              return handleOnPress(chat);\n            },\n            onLongPress: function onLongPress() {\n              return handleLongPress(chat);\n            },\n            selected: getSelected(chat),\n            showForwardIcon: false\n          })\n        }, chat.id);\n      }), _jsx(Separator, {}), _jsx(View, {\n        style: styles.blankContainer,\n        children: _jsxs(Text, {\n          style: {\n            fontSize: 12,\n            fontWeight: 400,\n            marginRight: 15,\n            marginLeft: 15,\n            marginTop: 15,\n            marginBottom: 90\n          },\n          children: [_jsx(Ionicons, {\n            name: \"lock-open\",\n            size: 12,\n            style: {\n              color: '#565656'\n            }\n          }), ' ', \"Your personal messages are not\", ' ', _jsx(Text, {\n            style: {\n              color: colors.teal\n            },\n            children: \"end-to-end-encrypted\"\n          })]\n        })\n      })]\n    }), _jsx(TouchableOpacity, {\n      style: styles.fab,\n      onPress: handleFabPress,\n      children: _jsx(View, {\n        style: styles.fabContainer,\n        children: _jsx(Ionicons, {\n          name: \"chatbox-ellipses\",\n          size: 24,\n          color: 'white'\n        })\n      })\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  fab: {\n    position: 'absolute',\n    bottom: 12,\n    right: 12\n  },\n  fabContainer: {\n    width: 56,\n    height: 56,\n    backgroundColor: colors.teal,\n    borderRadius: 28,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  container: {\n    flex: 1\n  },\n  blankContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  textContainer: {\n    fontSize: 16\n  },\n  selectedContactRow: {\n    backgroundColor: '#E0E0E0'\n  },\n  trashBin: {\n    right: 12,\n    color: colors.teal\n  },\n  itemCount: {\n    left: 100,\n    color: colors.teal,\n    fontSize: 18,\n    fontWeight: 400\n  },\n  loadingContainer: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: colors.teal\n  }\n});\nexport default Chats;","map":{"version":3,"names":["React","useState","useEffect","SafeAreaView","StyleSheet","View","TouchableOpacity","Text","ScrollView","Pressable","BackHandler","Alert","ActivityIndicator","ContactRow","Separator","useNavigation","auth","database","collection","doc","where","query","onSnapshot","orderBy","setDoc","deleteDoc","Ionicons","colors","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Chats","navigation","_useState","_useState2","_slicedToArray","chats","setChats","_useState3","_useState4","loading","setLoading","_useState5","_useState6","lastAccess","setLastAccess","_useState7","_useState8","selectedItems","setSelectedItems","_auth$currentUser","_auth$currentUser2","collectionRef","q","email","currentUser","name","displayName","deletedFromChat","unsubscribe","docs","length","setOptions","headerRight","style","styles","trashBin","onPress","handleDeleteChat","children","size","color","teal","headerLeft","itemCount","handleChatName","chat","_auth$currentUser3","_auth$currentUser9","data","groupName","_auth$currentUser4","_auth$currentUser8","users","_auth$currentUser5","_auth$currentUser6","_auth$currentUser7","_auth$currentUser10","_auth$currentUser14","_auth$currentUser11","_auth$currentUser12","_auth$currentUser13","handleOnPress","selectItems","navigate","id","chatName","handleLongPress","includes","newListItems","filter","listItem","_toConsumableArray","concat","getSelected","deSelectItems","handleFabPress","alert","text","map","chatId","willUpdatedUsers","willUpdatedChat","user","_auth$currentUser15","push","merge","deletedFromChatUsers","forEach","cancelable","handleSubtitle","messages","_auth$currentUser16","_id","image","substring","firstName","indexOf","_auth$currentUser17","handleSubtitle2","options","year","month","day","timestemp","Date","lastUpdated","date","toLocaleDateString","undefined","container","loadingContainer","blankContainer","textContainer","selectedContactRow","subtitle","subtitle2","onLongPress","selected","showForwardIcon","fontSize","fontWeight","marginRight","marginLeft","marginTop","marginBottom","fab","fabContainer","create","position","bottom","right","width","height","backgroundColor","borderRadius","justifyContent","alignItems","flex","left"],"sources":["/home/jtm/dev/rn-chat-cu/screens/Chats.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { SafeAreaView, StyleSheet, View, TouchableOpacity, Text, ScrollView, Pressable, BackHandler, Alert, ActivityIndicator } from \"react-native\";\nimport ContactRow from '../components/ContactRow';\nimport Separator from \"../components/Separator\";\nimport { useNavigation } from '@react-navigation/native';\nimport { auth, database } from '../config/firebase';\nimport { collection, doc, where, query, onSnapshot, orderBy, setDoc, deleteDoc } from 'firebase/firestore';\nimport { Ionicons } from '@expo/vector-icons'\nimport { colors } from \"../config/constants\";\n\nconst Chats = () => {\n    const navigation = useNavigation();\n    const [chats, setChats] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [lastAccess, setLastAccess] = useState([]);\n    const [selectedItems, setSelectedItems] = useState([]);\n\n    useEffect(() => {\n        const collectionRef = collection(database, 'chats');\n        const q = query(collectionRef,\n            where('users', \"array-contains\", { email: auth?.currentUser?.email, name: auth?.currentUser?.displayName, deletedFromChat: false }),\n            orderBy(\"lastUpdated\", \"desc\")\n        );\n        const unsubscribe = onSnapshot(q, (doc) => {\n            if (doc.docs.length == 0) {\n                setLoading(false);\n            }\n            setChats(doc.docs);\n        });\n\n        // DELETE BUTTON \n        if (selectedItems.length > 0) {\n            navigation.setOptions({\n                headerRight: () => (\n                    <TouchableOpacity style={styles.trashBin} onPress={handleDeleteChat}>\n                        <View>\n                            <Ionicons name=\"trash\" size={24} color={colors.teal} />\n                        </View>\n                    </TouchableOpacity>\n                ),\n                headerLeft: () => (\n                    <Text style={styles.itemCount}>\n                        {selectedItems.length}\n                    </Text>\n                ),\n            });\n        } else {\n            navigation.setOptions({\n                headerRight: () => { },\n                headerLeft: () => { },\n            },\n            );\n        }\n\n        return () => unsubscribe();\n    }, [selectedItems]);\n\n    \n    const handleChatName = (chat) => {\n        if (chat.data().groupName) {\n            return chat.data().groupName;\n        } else if (auth?.currentUser?.displayName) {\n            if (auth?.currentUser?.displayName === chat.data().users[0].name) {\n                //For 'message yourself'\n                if (auth?.currentUser?.displayName === chat.data().users[0].name && auth?.currentUser?.displayName === chat.data().users[1].name) {\n                    return auth?.currentUser?.displayName + '*(You)';\n                }\n                return chat.data().users[1].name;\n            } else if (auth?.currentUser?.displayName === chat.data().users[1].name) {\n                return chat.data().users[0].name;\n            }\n        } else if (auth?.currentUser?.email) {\n            if (auth?.currentUser?.email === chat.data().users[0].email) {\n                //For 'message yourself'\n                if (auth?.currentUser?.email === chat.data().users[0].email && auth?.currentUser?.email === chat.data().users[1].email) {\n                    return auth?.currentUser?.email + '*(You)';\n                }\n                return chat.data().users[1].email;\n            } else if (auth?.currentUser?.email === chat.data().users[1].email) {\n                return chat.data().users[0].email;\n            }\n        } else {\n            return '~ No Name or Email ~';\n        }\n    }\n\n    const handleOnPress = (chat) => {\n        if (selectedItems.length) {\n            return selectItems(chat)\n        }\n        navigation.navigate('Chat', { id: chat.id, chatName: handleChatName(chat) })\n\n        //TODO CHECK THIS\n        // //SET LAST ACCESS TO CHAT FOR EACH USER\n        // onSnapshot(doc(database, 'chats', chat.id), (doc) => {\n        //     setLastAccess(doc.data().lastAccess.map((user) => ({\n        //         email: user.email,\n        //         date: auth?.currentUser?.email == user.email ? Date.now() : user.date,\n        //     })));\n        // });\n\n\n        // if (lastAccess.length > 0) {\n        //     setDoc(doc(database, 'chats', chat.id), { lastAccess: lastAccess, }, { merge: true });\n        // }\n    }\n\n    const handleLongPress = (chat) => {\n        selectItems(chat);\n    }\n\n    const selectItems = (chat) => {\n        if (selectedItems.includes(chat.id)) {\n            const newListItems = selectedItems.filter(\n                listItem => listItem !== chat.id,\n            );\n            return setSelectedItems([...newListItems]);\n        }\n        setSelectedItems([...selectedItems, chat.id]);\n    }\n\n    const getSelected = (chat) => {\n        return selectedItems.includes(chat.id);\n    }\n\n    const deSelectItems = () => {\n        setSelectedItems([]);\n    };\n\n    const handleFabPress = () => {\n        navigation.navigate('Users');\n    }\n\n    const handleDeleteChat = () => {\n        Alert.alert(\n            selectedItems.length > 1 ? \"Delete selected chats?\" : \"Delete this chat?\",\n            \"Messages will be removed from this device.\",\n            [\n                // The \"Yes\" button\n                {\n                    text: \"Delete chat\",\n                    onPress: () => {\n                        //Find the willUpdatedUsers\n                        selectedItems.map((chatId) => {\n                            let willUpdatedUsers = [];\n                            chats.map(chat => {\n                                if (chatId == chat.id) {\n\n                                    willUpdatedChat = chat;\n                                    chat.data().users.map(user => {\n                                        if (user.email == auth?.currentUser?.email) {\n                                            willUpdatedUsers.push({ email: user.email, name: user.name, deletedFromChat: true })\n                                        } else {\n                                            willUpdatedUsers.push({ email: user.email, name: user.name, deletedFromChat: user.deletedFromChat })\n                                        }\n                                    })\n                                }\n                            })\n                            //Remove the current user from chat\n                            setDoc(doc(database, 'chats', chatId), {\n                                users: willUpdatedUsers\n                            }, { merge: true });\n                            //if nobody left in chat, delete the entire chat\n                            let deletedFromChatUsers = 0;\n                            willUpdatedUsers.forEach(user => {\n                                if (user.deletedFromChat) {\n                                    deletedFromChatUsers++;\n                                }\n                            })\n                            if (willUpdatedUsers.length == deletedFromChatUsers) {\n                                deleteDoc(doc(database, 'chats', chatId))\n                            }\n                        });\n                        deSelectItems();\n                    },\n                },\n                // The \"Cancel\" button\n                // Does nothing but dismiss the dialog when tapped\n                {\n                    text: \"Cancel\",\n                },\n            ],\n            { cancelable: true }\n        );\n    }\n\n    const handleSubtitle = (chat) => {\n        if (chat.data().messages.length === 0) {\n            return \"No messages yet\";\n        } else {\n            if (chat.data().groupName != '') { //It is group chat\n                if (auth?.currentUser?.email == chat.data().messages[0].user._id) { //Yours message\n                    //Check lenght of the last message and add three dot...\n                    if (chat.data().messages[0].image && chat.data().messages[0].image != '') {\n                        return 'You sent an image';\n                    } else if (chat.data().messages[0].text.length > 20) {\n                        return 'You: ' + chat.data().messages[0].text.substring(0, 20) + '...';\n                    } else {\n                        return 'You: ' + chat.data().messages[0].text.substring(0, 20);\n                    }\n                } else {//Others message\n                    //Get first name\n                    const firstName = chat.data().messages[0].user.name.substring(0, chat.data().messages[0].user.name.indexOf(' '));\n                    //Check lenght of the last message and add three dot...\n                    if (chat.data().messages[0].image && chat.data().messages[0].image != '') {\n                        return firstName + ' sent an image';\n                    } else if (chat.data().messages[0].text.length > 20) {\n                        return firstName + ': ' + chat.data().messages[0].text.substring(0, 20) + '...';\n                    } else {\n                        return firstName + ': ' + chat.data().messages[0].text.substring(0, 20);\n                    }\n                }\n            } else { //It is not group chat\n                if (auth?.currentUser?.email == chat.data().messages[0].user._id) { //Yours message\n                    //Check lenght of the last message and add three dot...\n                    if (chat.data().messages[0].image && chat.data().messages[0].image != '') {\n                        return 'You sent an image';\n                    } else if (chat.data().messages[0].text.length > 20) {\n                        return chat.data().messages[0].text.substring(0, 20) + '...';\n                    } else {\n                        return chat.data().messages[0].text.substring(0, 20);\n                    }\n                } else {//Others message\n                    //Get first name\n                    const firstName = chat.data().messages[0].user.name.substring(0, chat.data().messages[0].user.name.indexOf(' '));\n                    //Check lenght of the last message and add three dot...\n                    if (chat.data().messages[0].image && chat.data().messages[0].image != '') {\n                        return firstName + ' sent an image';\n                    } else if (chat.data().messages[0].text.length > 20) {\n                        return chat.data().messages[0].text.substring(0, 20) + '...';\n                    } else {\n                        return chat.data().messages[0].text.substring(0, 20);\n                    }\n                }\n            }\n        }\n    }\n\n    const handleSubtitle2 = (chat) => {\n        const options = { year: '2-digit', month: 'numeric', day: 'numeric' };\n        const timestemp = new Date(chat.data().lastUpdated);\n        const date = timestemp.toLocaleDateString(undefined, options);\n        return date;\n    }\n\n    return (\n        <Pressable style={styles.container} onPress={deSelectItems}>\n            {chats.length === 0 ? (\n                <>\n                    {loading == true ? (\n                        <ActivityIndicator size='large' style={styles.loadingContainer} />\n                    ) :\n                        (\n                            <View style={styles.blankContainer}>\n                                <Text style={styles.textContainer}>\n                                    No conversations yet\n                                </Text>\n                            </View>\n                        )\n                    }\n                </>\n            ) : (\n                <ScrollView >\n                    {chats.map(chat => (\n                        <React.Fragment key={chat.id}>\n                            <ContactRow style={getSelected(chat) ? styles.selectedContactRow : \"\"}\n                                name={handleChatName(chat)}\n                                subtitle={handleSubtitle(chat)}\n                                subtitle2={handleSubtitle2(chat)}\n                                onPress={() => handleOnPress(chat)}\n                                onLongPress={() => handleLongPress(chat)}\n                                selected={getSelected(chat)}\n                                showForwardIcon={false}\n                            />\n                        </React.Fragment>\n                    ))}\n                    <Separator />\n                    <View style={styles.blankContainer} >\n                        <Text style={{ fontSize: 12, fontWeight: 400, marginRight: 15, marginLeft: 15, marginTop: 15, marginBottom: 90 }}>\n                            <Ionicons name=\"lock-open\" size={12} style={{ color: '#565656' }} />\n                            {' '}Your personal messages are not{' '}\n                            <Text style={{ color: colors.teal }}>\n                                end-to-end-encrypted\n                            </Text>\n                        </Text>\n                    </View>\n                </ScrollView>\n            )}\n\n            <TouchableOpacity style={styles.fab} onPress={handleFabPress}>\n                <View style={styles.fabContainer}>\n                    <Ionicons name=\"chatbox-ellipses\" size={24} color={'white'} />\n                </View>\n            </TouchableOpacity>\n        </Pressable>\n    )\n}\n\nconst styles = StyleSheet.create({\n    fab: {\n        position: 'absolute',\n        bottom: 12,\n        right: 12\n    },\n    fabContainer: {\n        width: 56,\n        height: 56,\n        backgroundColor: colors.teal,\n        borderRadius: 28,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    container: {\n        flex: 1\n    },\n    blankContainer: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    textContainer: {\n        fontSize: 16\n    },\n    selectedContactRow: {\n        backgroundColor: '#E0E0E0'\n    },\n    trashBin: {\n        right: 12,\n        color: colors.teal,\n    },\n    itemCount: {\n        left: 100,\n        color: colors.teal,\n        fontSize: 18,\n        fontWeight: 400,\n    },\n    loadingContainer: {\n        flex: 1,\n        alignItems: 'center',\n        justifyContent: 'center',\n        color: colors.teal\n    }\n})\nexport default Chats;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}