{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, createContext, useContext, useEffect } from \"react\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { createStackNavigator } from \"@react-navigation/stack\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { createBottomTabNavigator } from \"@react-navigation/bottom-tabs\";\nimport { Ionicons } from '@expo/vector-icons';\nimport Chats from \"./screens/Chats\";\nimport Settings from \"./screens/Settings\";\nimport { colors } from \"./config/constants\";\nimport SignUp from \"./screens/SignUp\";\nimport Chat from \"./screens/Chat\";\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { auth } from \"./config/firebase\";\nimport Profile from \"./screens/Profile\";\nimport Login from \"./screens/Login\";\nimport Users from \"./screens/Users\";\nimport About from \"./screens/About\";\nimport Account from \"./screens/Account\";\nimport Help from \"./screens/Help\";\nimport Group from \"./screens/Group\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Stack = createStackNavigator();\nvar Tab = createBottomTabNavigator();\nvar AuthenticatedUserContext = createContext({});\nvar AuthenticatedUserProvider = function AuthenticatedUserProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  return _jsx(AuthenticatedUserContext.Provider, {\n    value: {\n      user: user,\n      setUser: setUser\n    },\n    children: children\n  });\n};\nvar TabNavigator = function TabNavigator() {\n  return _jsxs(Tab.Navigator, {\n    screenOptions: function screenOptions(_ref2) {\n      var route = _ref2.route;\n      return {\n        tabBarIcon: function tabBarIcon(_ref3) {\n          var focused = _ref3.focused,\n            color = _ref3.color,\n            size = _ref3.size;\n          var iconName;\n          if (route.name === 'Chats') {\n            iconName = focused ? 'chatbubbles' : 'chatbubbles-outline';\n          } else if (route.name === 'Settings') {\n            iconName = focused ? 'settings' : 'settings-outline';\n          }\n          return _jsx(Ionicons, {\n            name: iconName,\n            size: size,\n            color: color\n          });\n        },\n        tabBarActiveTintColor: colors.primary,\n        tabBarInactiveTintColor: 'gray',\n        headerShown: true,\n        presentation: 'modal'\n      };\n    },\n    children: [_jsx(Tab.Screen, {\n      name: \"Chats\",\n      component: Chats\n    }), _jsx(Tab.Screen, {\n      name: \"Settings\",\n      component: Settings\n    })]\n  });\n};\nvar MainStack = function MainStack() {\n  return _jsxs(Stack.Navigator, {\n    children: [_jsx(Stack.Screen, {\n      name: \"Home\",\n      component: TabNavigator,\n      options: {\n        headerShown: false\n      }\n    }), _jsx(Stack.Screen, {\n      name: \"Chat\",\n      component: Chat,\n      options: function options(_ref4) {\n        var route = _ref4.route;\n        return {\n          headerTitle: route.params.chatName\n        };\n      }\n    }), _jsx(Stack.Screen, {\n      name: \"Users\",\n      component: Users,\n      options: {\n        title: 'Select User'\n      }\n    }), _jsx(Stack.Screen, {\n      name: \"Profile\",\n      component: Profile\n    }), _jsx(Stack.Screen, {\n      name: \"About\",\n      component: About\n    }), _jsx(Stack.Screen, {\n      name: \"Help\",\n      component: Help\n    }), _jsx(Stack.Screen, {\n      name: \"Account\",\n      component: Account\n    }), _jsx(Stack.Screen, {\n      name: \"Group\",\n      component: Group,\n      options: {\n        title: 'New Group'\n      }\n    })]\n  });\n};\nfunction AuthStack() {\n  return _jsxs(Stack.Navigator, {\n    screenOptions: {\n      headerShown: false\n    },\n    children: [_jsx(Stack.Screen, {\n      name: \"Login\",\n      component: Login\n    }), _jsx(Stack.Screen, {\n      name: \"SignUp\",\n      component: SignUp\n    })]\n  });\n}\nfunction RootNavigator() {\n  var _useContext = useContext(AuthenticatedUserContext),\n    user = _useContext.user,\n    setUser = _useContext.setUser;\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isLoading = _useState4[0],\n    setIsLoading = _useState4[1];\n  useEffect(function () {\n    var unsubscribeAuth = onAuthStateChanged(auth, function () {\n      var _ref5 = _asyncToGenerator(function* (authenticatedUser) {\n        authenticatedUser ? setUser(authenticatedUser) : setUser(null);\n        setIsLoading(false);\n      });\n      return function (_x) {\n        return _ref5.apply(this, arguments);\n      };\n    }());\n    return unsubscribeAuth;\n  }, [user]);\n  if (isLoading) {\n    return _jsx(View, {\n      style: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      children: _jsx(ActivityIndicator, {\n        size: \"large\"\n      })\n    });\n  }\n  return _jsx(NavigationContainer, {\n    children: user ? _jsx(MainStack, {}) : _jsx(AuthStack, {})\n  });\n}\nexport default function App() {\n  return _jsx(AuthenticatedUserProvider, {\n    children: _jsx(RootNavigator, {})\n  });\n}","map":{"version":3,"names":["React","useState","createContext","useContext","useEffect","NavigationContainer","createStackNavigator","View","ActivityIndicator","createBottomTabNavigator","Ionicons","Chats","Settings","colors","SignUp","Chat","onAuthStateChanged","auth","Profile","Login","Users","About","Account","Help","Group","jsx","_jsx","jsxs","_jsxs","Stack","Tab","AuthenticatedUserContext","AuthenticatedUserProvider","_ref","children","_useState","_useState2","_slicedToArray","user","setUser","Provider","value","TabNavigator","Navigator","screenOptions","_ref2","route","tabBarIcon","_ref3","focused","color","size","iconName","name","tabBarActiveTintColor","primary","tabBarInactiveTintColor","headerShown","presentation","Screen","component","MainStack","options","_ref4","headerTitle","params","chatName","title","AuthStack","RootNavigator","_useContext","_useState3","_useState4","isLoading","setIsLoading","unsubscribeAuth","_ref5","_asyncToGenerator","authenticatedUser","_x","apply","arguments","style","flex","justifyContent","alignItems","App"],"sources":["/home/jtm/dev/rn-chat-cu/App.js"],"sourcesContent":["import React, { useState, createContext, useContext, useEffect } from \"react\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { createStackNavigator } from \"@react-navigation/stack\";\nimport { View, ActivityIndicator } from 'react-native';\nimport { createBottomTabNavigator } from \"@react-navigation/bottom-tabs\";\nimport { Ionicons } from '@expo/vector-icons'\nimport Chats from './screens/Chats'\nimport Settings from \"./screens/Settings\";\nimport { colors } from \"./config/constants\";\nimport SignUp from \"./screens/SignUp\";\nimport Chat from \"./screens/Chat\";\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { auth } from './config/firebase';\nimport Profile from \"./screens/Profile\";\nimport Login from \"./screens/Login\";\nimport Users from \"./screens/Users\";\nimport About from \"./screens/About\";\nimport Account from \"./screens/Account\";\nimport Help from \"./screens/Help\";\nimport Group from \"./screens/Group\";\n\nconst Stack = createStackNavigator();\nconst Tab = createBottomTabNavigator()\nconst AuthenticatedUserContext = createContext({});\n\nconst AuthenticatedUserProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  return (\n    <AuthenticatedUserContext.Provider value={{ user, setUser }}>\n      {children}\n    </AuthenticatedUserContext.Provider>\n  );\n};\n\nconst TabNavigator = () => (\n  <Tab.Navigator screenOptions={({ route }) => ({\n    tabBarIcon: ({ focused, color, size }) => {\n      let iconName;\n\n      if (route.name === 'Chats') {\n        iconName = focused\n          ? 'chatbubbles'\n          : 'chatbubbles-outline';\n      } else if (route.name === 'Settings') {\n        iconName = focused ? 'settings' : 'settings-outline';\n      }\n      // You can return any component that you like here!\n      return <Ionicons name={iconName} size={size} color={color} />;\n    },\n    tabBarActiveTintColor: colors.primary,\n    tabBarInactiveTintColor: 'gray',\n    headerShown: true,\n    presentation: 'modal'\n  })}>\n    <Tab.Screen name=\"Chats\" component={Chats} />\n    <Tab.Screen name=\"Settings\" component={Settings} />\n  </Tab.Navigator >\n)\n\nconst MainStack = () => (\n  <Stack.Navigator>\n    <Stack.Screen name=\"Home\" component={TabNavigator} options={{ headerShown: false }} />\n    <Stack.Screen name=\"Chat\" component={Chat} options={({ route }) => ({ headerTitle: route.params.chatName })} />\n    <Stack.Screen name=\"Users\" component={Users} options={{ title: 'Select User' }} />\n    <Stack.Screen name=\"Profile\" component={Profile} />\n    <Stack.Screen name=\"About\" component={About} />\n    <Stack.Screen name=\"Help\" component={Help} />\n    <Stack.Screen name=\"Account\" component={Account} />\n    <Stack.Screen name=\"Group\" component={Group} options={{ title: 'New Group' }} />\n  </Stack.Navigator>\n)\n\nfunction AuthStack() {\n  return (\n    <Stack.Navigator screenOptions={{ headerShown: false }}>\n      <Stack.Screen name='Login' component={Login} />\n      <Stack.Screen name='SignUp' component={SignUp} />\n    </Stack.Navigator>\n  );\n}\n\nfunction RootNavigator() {\n  const { user, setUser } = useContext(AuthenticatedUserContext);\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    // onAuthStateChanged returns an unsubscriber\n    const unsubscribeAuth = onAuthStateChanged(\n      auth,\n      async authenticatedUser => {\n        authenticatedUser ? setUser(authenticatedUser) : setUser(null);\n        setIsLoading(false);\n      }\n    );\n    // unsubscribe auth listener on unmount\n    return unsubscribeAuth;\n  }, [user]);\n  if (isLoading) {\n    return (\n      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n        <ActivityIndicator size='large' />\n      </View>\n    );\n  }\n\n  return (\n    <NavigationContainer>\n      {user ? <MainStack /> : <AuthStack />}\n    </NavigationContainer>\n  );\n}\n\nexport default function App() {\n  return (\n    <AuthenticatedUserProvider>\n      <RootNavigator />\n    </AuthenticatedUserProvider>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}