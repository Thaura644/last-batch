{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport ContactRow from \"../components/ContactRow\";\nimport Separator from \"../components/Separator\";\nimport { auth, database } from \"../config/firebase\";\nimport { collection, doc, onSnapshot, setDoc, query, orderBy, where } from 'firebase/firestore';\nimport { colors } from \"../config/constants\";\nimport Cell from \"../components/Cell\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Users = function Users() {\n  var navigation = useNavigation();\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    users = _useState2[0],\n    setUsers = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    existingChats = _useState4[0],\n    setExistingChats = _useState4[1];\n  useEffect(function () {\n    var _auth$currentUser, _auth$currentUser2;\n    var collectionUserRef = collection(database, 'users');\n    var q = query(collectionUserRef, orderBy(\"name\", \"asc\"));\n    onSnapshot(q, function (doc) {\n      setUsers(doc.docs);\n    });\n    var collectionChatsRef = collection(database, 'chats');\n    var q2 = query(collectionChatsRef, where('users', \"array-contains\", {\n      email: auth == null ? void 0 : (_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.email,\n      name: auth == null ? void 0 : (_auth$currentUser2 = auth.currentUser) == null ? void 0 : _auth$currentUser2.displayName,\n      deletedFromChat: false\n    }), where('groupName', \"==\", ''));\n    onSnapshot(q2, function (doc) {\n      doc.docs.map(function (existingChat) {\n        if (!existingChats.find(function (e) {\n          return e.chatId === existingChat.id;\n        })) {\n          existingChats.push({\n            chatId: existingChat.id,\n            userEmails: existingChat.data().users\n          });\n        }\n      });\n      setExistingChats(existingChats);\n    });\n  }, []);\n  var handleNewGroup = function handleNewGroup() {\n    navigation.navigate('Group');\n  };\n  var handleNewUser = function handleNewUser() {\n    alert('New user');\n  };\n  var handleNavigate = function handleNavigate(user) {\n    var navigationChatID = '';\n    var messageYourselfChatID = '';\n    existingChats.map(function (existingChat) {\n      var _auth$currentUser4;\n      var isCurrentUserInTheChat = false;\n      var isMessageYourselfExists = 0;\n      existingChat.userEmails.map(function (e) {\n        var _auth$currentUser3;\n        if (e.email == (auth == null ? void 0 : (_auth$currentUser3 = auth.currentUser) == null ? void 0 : _auth$currentUser3.email)) {\n          isCurrentUserInTheChat = true;\n        }\n        if (e.email == user.data().email) {\n          isMessageYourselfExists++;\n        }\n      });\n      existingChat.userEmails.map(function (e) {\n        if (isCurrentUserInTheChat && e.email == user.data().email) {\n          navigationChatID = existingChat.chatId;\n        }\n      });\n      if (isMessageYourselfExists == 2) {\n        messageYourselfChatID = existingChat.chatId;\n      }\n      if ((auth == null ? void 0 : (_auth$currentUser4 = auth.currentUser) == null ? void 0 : _auth$currentUser4.email) == user.data().email) {\n        navigationChatID = '';\n      }\n    });\n    if (messageYourselfChatID != '') {\n      navigation.navigate('Chat', {\n        id: messageYourselfChatID,\n        chatName: handleName(user)\n      });\n    } else if (navigationChatID != '') {\n      navigation.navigate('Chat', {\n        id: navigationChatID,\n        chatName: handleName(user)\n      });\n    } else {\n      var _auth$currentUser5, _auth$currentUser6, _auth$currentUser7;\n      var newRef = doc(collection(database, \"chats\"));\n      setDoc(newRef, {\n        lastUpdated: Date.now(),\n        groupName: '',\n        users: [{\n          email: auth == null ? void 0 : (_auth$currentUser5 = auth.currentUser) == null ? void 0 : _auth$currentUser5.email,\n          name: auth == null ? void 0 : (_auth$currentUser6 = auth.currentUser) == null ? void 0 : _auth$currentUser6.displayName,\n          deletedFromChat: false\n        }, {\n          email: user.data().email,\n          name: user.data().name,\n          deletedFromChat: false\n        }],\n        lastAccess: [{\n          email: auth == null ? void 0 : (_auth$currentUser7 = auth.currentUser) == null ? void 0 : _auth$currentUser7.email,\n          date: Date.now()\n        }, {\n          email: user.data().email,\n          date: ''\n        }],\n        messages: []\n      }).then(navigation.navigate('Chat', {\n        id: newRef.id,\n        chatName: handleName(user)\n      }));\n    }\n  };\n  function handleSubtitle(user) {\n    var _auth$currentUser8;\n    if (user.data().email == (auth == null ? void 0 : (_auth$currentUser8 = auth.currentUser) == null ? void 0 : _auth$currentUser8.email)) {\n      return 'Message yourself';\n    } else {\n      return 'User status';\n    }\n  }\n  function handleName(user) {\n    if (user.data().name) {\n      var _auth$currentUser9;\n      if (user.data().email == (auth == null ? void 0 : (_auth$currentUser9 = auth.currentUser) == null ? void 0 : _auth$currentUser9.email)) {\n        return user.data().name + '*(You)';\n      }\n      return user.data().name;\n    } else if (user.data().email) {\n      return user.data().email;\n    } else {\n      return '~ No Name or Email ~';\n    }\n  }\n  return _jsxs(SafeAreaView, {\n    style: styles.container,\n    children: [_jsx(Cell, {\n      title: \"New group\",\n      icon: \"people\",\n      tintColor: colors.teal,\n      onPress: handleNewGroup,\n      style: {\n        marginTop: 5\n      }\n    }), _jsx(Cell, {\n      title: \"New user\",\n      icon: \"person-add\",\n      tintColor: colors.teal,\n      onPress: handleNewUser,\n      style: {\n        marginBottom: 10\n      }\n    }), users.length === 0 ? _jsx(View, {\n      style: styles.blankContainer,\n      children: _jsx(Text, {\n        style: styles.textContainer,\n        children: \"No registered users yet\"\n      })\n    }) : _jsxs(ScrollView, {\n      children: [_jsx(View, {\n        children: _jsx(Text, {\n          style: styles.textContainer,\n          children: \"Registered users\"\n        })\n      }), users.map(function (user) {\n        return _jsx(React.Fragment, {\n          children: _jsx(ContactRow, {\n            name: handleName(user),\n            subtitle: handleSubtitle(user),\n            onPress: function onPress() {\n              return handleNavigate(user);\n            },\n            showForwardIcon: false\n          })\n        }, user.id);\n      })]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  blankContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  textContainer: {\n    marginLeft: 16,\n    fontSize: 16,\n    fontWeight: 300\n  }\n});\nexport default Users;","map":{"version":3,"names":["React","useState","useEffect","useCallback","SafeAreaView","StyleSheet","View","Text","ScrollView","useNavigation","useRoute","ContactRow","Separator","auth","database","collection","doc","onSnapshot","setDoc","query","orderBy","where","colors","Cell","jsx","_jsx","jsxs","_jsxs","Users","navigation","_useState","_useState2","_slicedToArray","users","setUsers","_useState3","_useState4","existingChats","setExistingChats","_auth$currentUser","_auth$currentUser2","collectionUserRef","q","docs","collectionChatsRef","q2","email","currentUser","name","displayName","deletedFromChat","map","existingChat","find","e","chatId","id","push","userEmails","data","handleNewGroup","navigate","handleNewUser","alert","handleNavigate","user","navigationChatID","messageYourselfChatID","_auth$currentUser4","isCurrentUserInTheChat","isMessageYourselfExists","_auth$currentUser3","chatName","handleName","_auth$currentUser5","_auth$currentUser6","_auth$currentUser7","newRef","lastUpdated","Date","now","groupName","lastAccess","date","messages","then","handleSubtitle","_auth$currentUser8","_auth$currentUser9","style","styles","container","children","title","icon","tintColor","teal","onPress","marginTop","marginBottom","length","blankContainer","textContainer","Fragment","subtitle","showForwardIcon","create","flex","justifyContent","alignItems","marginLeft","fontSize","fontWeight"],"sources":["/home/jtm/dev/rn-chat-cu/screens/Users.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { SafeAreaView, StyleSheet, View, Text, ScrollView } from \"react-native\";\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport ContactRow from '../components/ContactRow';\nimport Separator from \"../components/Separator\";\nimport { auth, database } from '../config/firebase';\nimport { collection, doc, onSnapshot, setDoc, query, orderBy, where } from 'firebase/firestore';\nimport { colors } from \"../config/constants\";\nimport Cell from \"../components/Cell\";\n\nconst Users = () => {\n    const navigation = useNavigation();\n    const [users, setUsers] = useState([]);\n    const [existingChats, setExistingChats] = useState([]);\n\n    useEffect(() => {\n        const collectionUserRef = collection(database, 'users');\n        const q = query(collectionUserRef, orderBy(\"name\", \"asc\"));\n        onSnapshot(q, (doc) => {\n            setUsers(doc.docs);\n        });\n\n        //Get existing chats to avoid creating duplicate chats\n        //Do not include group chats to avoid conflict chats --> where('groupName', \"==\", '')\n        const collectionChatsRef = collection(database, 'chats');\n        const q2 = query(collectionChatsRef,\n            where('users', \"array-contains\", { email: auth?.currentUser?.email, name: auth?.currentUser?.displayName, deletedFromChat: false }),\n            where('groupName', \"==\", ''),\n        );\n        onSnapshot(q2, (doc) => {\n            doc.docs.map(existingChat => {\n                if (!existingChats.find(e => e.chatId === existingChat.id)) {\n                    existingChats.push({ chatId: existingChat.id, userEmails: existingChat.data().users })\n                }\n            });\n            setExistingChats(existingChats);\n        });\n\n    }, []);\n\n    const handleNewGroup = () => {\n        navigation.navigate('Group');\n    }\n\n    const handleNewUser = () => {\n        alert('New user');\n    }\n\n    const handleNavigate = (user) => {\n        let navigationChatID = '';\n        let messageYourselfChatID = '';\n\n        existingChats.map(existingChat => {\n            // console.log('--------------------------');\n            // console.log(existingChat, user.data().email);\n            let isCurrentUserInTheChat = false;\n            let isMessageYourselfExists = 0;\n            existingChat.userEmails.map((e) => {\n                if (e.email == auth?.currentUser?.email) {\n                    isCurrentUserInTheChat = true;\n                }\n\n                //Check is 'message yourself' chat exists\n                if (e.email == user.data().email) {\n                    isMessageYourselfExists++;\n                }\n            });\n\n            //This check is not look for 'message yourself' chat !.\n            //It only checks chats between different users.\n            existingChat.userEmails.map((e) => {\n                if (isCurrentUserInTheChat && e.email == user.data().email) {\n                    navigationChatID = existingChat.chatId;\n                }\n            });\n\n            //Need to seperate 'message yourself' chat id from other chats.\n            //It checks existing 'message yourself' chat.\n            if (isMessageYourselfExists == 2) {\n                messageYourselfChatID = existingChat.chatId;\n            }\n            //Creates new 'message yourself' chat.\n            if (auth?.currentUser?.email == user.data().email) {\n                navigationChatID = '';\n            }\n        });\n\n        if (messageYourselfChatID != '') {\n            navigation.navigate('Chat', { id: messageYourselfChatID, chatName: handleName(user) });\n        } else if (navigationChatID != '') {\n            navigation.navigate('Chat', { id: navigationChatID, chatName: handleName(user) });\n        } else {\n            //Creates new chat\n            const newRef = doc(collection(database, \"chats\"));\n            setDoc(newRef, {\n                lastUpdated: Date.now(),\n                groupName: '', //It is not a group chat\n                users: [\n                    { email: auth?.currentUser?.email, name: auth?.currentUser?.displayName, deletedFromChat: false },\n                    { email: user.data().email, name: user.data().name, deletedFromChat: false }\n                ],\n                lastAccess: [\n                    { email: auth?.currentUser?.email, date: Date.now(), },\n                    { email: user.data().email, date: '', }],\n                messages: []\n            }).then(\n                navigation.navigate('Chat', { id: newRef.id, chatName: handleName(user) })\n            );\n        }\n\n    }\n\n    function handleSubtitle(user) {\n        if (user.data().email == auth?.currentUser?.email) {\n            return 'Message yourself';\n        } else {\n            return 'User status';\n        }\n    }\n\n    function handleName(user) {\n        if (user.data().name) {\n            if (user.data().email == auth?.currentUser?.email) {\n                return user.data().name + ('*(You)');\n            }\n            return user.data().name;\n        } else if (user.data().email) {\n\n            return user.data().email;\n        } else {\n            return '~ No Name or Email ~';\n        }\n    }\n\n    return (\n        <SafeAreaView style={styles.container}>\n            <Cell\n                title='New group'\n                icon='people'\n                tintColor={colors.teal}\n                onPress={handleNewGroup}\n                style={{ marginTop: 5 }}\n            />\n            <Cell\n                title='New user'\n                icon='person-add'\n                tintColor={colors.teal}\n                onPress={handleNewUser}\n                style={{ marginBottom: 10 }}\n            />\n\n            {users.length === 0 ? (\n                <View style={styles.blankContainer} >\n                    <Text style={styles.textContainer}>\n                        No registered users yet\n                    </Text>\n                </View>\n            ) : (\n                <ScrollView>\n                    <View>\n                        <Text style={styles.textContainer}>\n                            Registered users\n                        </Text>\n                    </View>\n                    {users.map(user => (\n                        <React.Fragment key={user.id}>\n                            <ContactRow\n                                name={handleName(user)}\n                                subtitle={handleSubtitle(user)}\n                                onPress={() => handleNavigate(user)}\n                                showForwardIcon={false}\n                            />\n                        </React.Fragment>\n                    ))}\n                </ScrollView>\n            )}\n        </SafeAreaView>\n    )\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1\n    },\n    blankContainer: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    textContainer: {\n        marginLeft: 16,\n        fontSize: 16,\n        fontWeight: 300\n    }\n})\nexport default Users;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}