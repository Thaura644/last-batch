{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/jtm/dev/rn-chat-cu/screens/Users.js\",\n  _this = this;\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport ContactRow from '../components/ContactRow';\nimport Separator from \"../components/Separator\";\nimport { auth, database } from '../config/firebase';\nimport { collection, doc, onSnapshot, setDoc, query, orderBy, where } from 'firebase/firestore';\nimport { colors } from \"../config/constants\";\nimport Cell from \"../components/Cell\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar Users = function Users() {\n  var navigation = useNavigation();\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    users = _useState2[0],\n    setUsers = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    existingChats = _useState4[0],\n    setExistingChats = _useState4[1];\n  useEffect(function () {\n    var _auth$currentUser, _auth$currentUser2;\n    var collectionUserRef = collection(database, 'users');\n    var q = query(collectionUserRef, orderBy(\"name\", \"asc\"));\n    onSnapshot(q, function (doc) {\n      setUsers(doc.docs);\n    });\n    var collectionChatsRef = collection(database, 'chats');\n    var q2 = query(collectionChatsRef, where('users', \"array-contains\", {\n      email: auth == null ? void 0 : (_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.email,\n      name: auth == null ? void 0 : (_auth$currentUser2 = auth.currentUser) == null ? void 0 : _auth$currentUser2.displayName,\n      deletedFromChat: false\n    }), where('groupName', \"==\", ''));\n    onSnapshot(q2, function (doc) {\n      doc.docs.map(function (existingChat) {\n        if (!existingChats.find(function (e) {\n          return e.chatId === existingChat.id;\n        })) {\n          existingChats.push({\n            chatId: existingChat.id,\n            userEmails: existingChat.data().users\n          });\n        }\n      });\n      setExistingChats(existingChats);\n    });\n  }, []);\n  var handleNewGroup = function handleNewGroup() {\n    navigation.navigate('Group');\n  };\n  var handleNewUser = function handleNewUser() {\n    alert('New user');\n  };\n  var handleNavigate = function handleNavigate(user) {\n    var navigationChatID = '';\n    var messageYourselfChatID = '';\n    existingChats.map(function (existingChat) {\n      var _auth$currentUser4;\n      var isCurrentUserInTheChat = false;\n      var isMessageYourselfExists = 0;\n      existingChat.userEmails.map(function (e) {\n        var _auth$currentUser3;\n        if (e.email == (auth == null ? void 0 : (_auth$currentUser3 = auth.currentUser) == null ? void 0 : _auth$currentUser3.email)) {\n          isCurrentUserInTheChat = true;\n        }\n        if (e.email == user.data().email) {\n          isMessageYourselfExists++;\n        }\n      });\n      existingChat.userEmails.map(function (e) {\n        if (isCurrentUserInTheChat && e.email == user.data().email) {\n          navigationChatID = existingChat.chatId;\n        }\n      });\n      if (isMessageYourselfExists == 2) {\n        messageYourselfChatID = existingChat.chatId;\n      }\n      if ((auth == null ? void 0 : (_auth$currentUser4 = auth.currentUser) == null ? void 0 : _auth$currentUser4.email) == user.data().email) {\n        navigationChatID = '';\n      }\n    });\n    if (messageYourselfChatID != '') {\n      navigation.navigate('Chat', {\n        id: messageYourselfChatID,\n        chatName: handleName(user)\n      });\n    } else if (navigationChatID != '') {\n      navigation.navigate('Chat', {\n        id: navigationChatID,\n        chatName: handleName(user)\n      });\n    } else {\n      var _auth$currentUser5, _auth$currentUser6, _auth$currentUser7;\n      var newRef = doc(collection(database, \"chats\"));\n      setDoc(newRef, {\n        lastUpdated: Date.now(),\n        groupName: '',\n        users: [{\n          email: auth == null ? void 0 : (_auth$currentUser5 = auth.currentUser) == null ? void 0 : _auth$currentUser5.email,\n          name: auth == null ? void 0 : (_auth$currentUser6 = auth.currentUser) == null ? void 0 : _auth$currentUser6.displayName,\n          deletedFromChat: false\n        }, {\n          email: user.data().email,\n          name: user.data().name,\n          deletedFromChat: false\n        }],\n        lastAccess: [{\n          email: auth == null ? void 0 : (_auth$currentUser7 = auth.currentUser) == null ? void 0 : _auth$currentUser7.email,\n          date: Date.now()\n        }, {\n          email: user.data().email,\n          date: ''\n        }],\n        messages: []\n      }).then(navigation.navigate('Chat', {\n        id: newRef.id,\n        chatName: handleName(user)\n      }));\n    }\n  };\n  function handleSubtitle(user) {\n    var _auth$currentUser8;\n    if (user.data().email == (auth == null ? void 0 : (_auth$currentUser8 = auth.currentUser) == null ? void 0 : _auth$currentUser8.email)) {\n      return 'Message yourself';\n    } else {\n      return 'User status';\n    }\n  }\n  function handleName(user) {\n    if (user.data().name) {\n      var _auth$currentUser9;\n      if (user.data().email == (auth == null ? void 0 : (_auth$currentUser9 = auth.currentUser) == null ? void 0 : _auth$currentUser9.email)) {\n        return user.data().name + '*(You)';\n      }\n      return user.data().name;\n    } else if (user.data().email) {\n      return user.data().email;\n    } else {\n      return '~ No Name or Email ~';\n    }\n  }\n  return _jsxDEV(SafeAreaView, {\n    style: styles.container,\n    children: [_jsxDEV(Cell, {\n      title: \"New group\",\n      icon: \"people\",\n      tintColor: colors.teal,\n      onPress: handleNewGroup,\n      style: {\n        marginTop: 5\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }, _this), _jsxDEV(Cell, {\n      title: \"New user\",\n      icon: \"person-add\",\n      tintColor: colors.teal,\n      onPress: handleNewUser,\n      style: {\n        marginBottom: 10\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }, _this), users.length === 0 ? _jsxDEV(View, {\n      style: styles.blankContainer,\n      children: _jsxDEV(Text, {\n        style: styles.textContainer,\n        children: \"No registered users yet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 21\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }, _this) : _jsxDEV(ScrollView, {\n      children: [_jsxDEV(View, {\n        children: _jsxDEV(Text, {\n          style: styles.textContainer,\n          children: \"Registered users\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 25\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 21\n      }, _this), users.map(function (user) {\n        return _jsxDEV(React.Fragment, {\n          children: _jsxDEV(ContactRow, {\n            name: handleName(user),\n            subtitle: handleSubtitle(user),\n            onPress: function onPress() {\n              return handleNavigate(user);\n            },\n            showForwardIcon: false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 29\n          }, _this)\n        }, user.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 25\n        }, _this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 9\n  }, _this);\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  blankContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  textContainer: {\n    marginLeft: 16,\n    fontSize: 16,\n    fontWeight: 300\n  }\n});\nexport default Users;","map":{"version":3,"names":["React","useState","useEffect","useCallback","SafeAreaView","StyleSheet","View","Text","ScrollView","useNavigation","useRoute","ContactRow","Separator","auth","database","collection","doc","onSnapshot","setDoc","query","orderBy","where","colors","Cell","jsxDEV","_jsxDEV","Users","navigation","_useState","_useState2","_slicedToArray","users","setUsers","_useState3","_useState4","existingChats","setExistingChats","_auth$currentUser","_auth$currentUser2","collectionUserRef","q","docs","collectionChatsRef","q2","email","currentUser","name","displayName","deletedFromChat","map","existingChat","find","e","chatId","id","push","userEmails","data","handleNewGroup","navigate","handleNewUser","alert","handleNavigate","user","navigationChatID","messageYourselfChatID","_auth$currentUser4","isCurrentUserInTheChat","isMessageYourselfExists","_auth$currentUser3","chatName","handleName","_auth$currentUser5","_auth$currentUser6","_auth$currentUser7","newRef","lastUpdated","Date","now","groupName","lastAccess","date","messages","then","handleSubtitle","_auth$currentUser8","_auth$currentUser9","style","styles","container","children","title","icon","tintColor","teal","onPress","marginTop","fileName","_jsxFileName","lineNumber","columnNumber","_this","marginBottom","length","blankContainer","textContainer","Fragment","subtitle","showForwardIcon","create","flex","justifyContent","alignItems","marginLeft","fontSize","fontWeight"],"sources":["/home/jtm/dev/rn-chat-cu/screens/Users.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { SafeAreaView, StyleSheet, View, Text, ScrollView } from \"react-native\";\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport ContactRow from '../components/ContactRow';\nimport Separator from \"../components/Separator\";\nimport { auth, database } from '../config/firebase';\nimport { collection, doc, onSnapshot, setDoc, query, orderBy, where } from 'firebase/firestore';\nimport { colors } from \"../config/constants\";\nimport Cell from \"../components/Cell\";\n\nconst Users = () => {\n    const navigation = useNavigation();\n    const [users, setUsers] = useState([]);\n    const [existingChats, setExistingChats] = useState([]);\n\n    useEffect(() => {\n        const collectionUserRef = collection(database, 'users');\n        const q = query(collectionUserRef, orderBy(\"name\", \"asc\"));\n        onSnapshot(q, (doc) => {\n            setUsers(doc.docs);\n        });\n\n        //Get existing chats to avoid creating duplicate chats\n        //Do not include group chats to avoid conflict chats --> where('groupName', \"==\", '')\n        const collectionChatsRef = collection(database, 'chats');\n        const q2 = query(collectionChatsRef,\n            where('users', \"array-contains\", { email: auth?.currentUser?.email, name: auth?.currentUser?.displayName, deletedFromChat: false }),\n            where('groupName', \"==\", ''),\n        );\n        onSnapshot(q2, (doc) => {\n            doc.docs.map(existingChat => {\n                if (!existingChats.find(e => e.chatId === existingChat.id)) {\n                    existingChats.push({ chatId: existingChat.id, userEmails: existingChat.data().users })\n                }\n            });\n            setExistingChats(existingChats);\n        });\n\n    }, []);\n\n    const handleNewGroup = () => {\n        navigation.navigate('Group');\n    }\n\n    const handleNewUser = () => {\n        alert('New user');\n    }\n\n    const handleNavigate = (user) => {\n        let navigationChatID = '';\n        let messageYourselfChatID = '';\n\n        existingChats.map(existingChat => {\n            // console.log('--------------------------');\n            // console.log(existingChat, user.data().email);\n            let isCurrentUserInTheChat = false;\n            let isMessageYourselfExists = 0;\n            existingChat.userEmails.map((e) => {\n                if (e.email == auth?.currentUser?.email) {\n                    isCurrentUserInTheChat = true;\n                }\n\n                //Check is 'message yourself' chat exists\n                if (e.email == user.data().email) {\n                    isMessageYourselfExists++;\n                }\n            });\n\n            //This check is not look for 'message yourself' chat !.\n            //It only checks chats between different users.\n            existingChat.userEmails.map((e) => {\n                if (isCurrentUserInTheChat && e.email == user.data().email) {\n                    navigationChatID = existingChat.chatId;\n                }\n            });\n\n            //Need to seperate 'message yourself' chat id from other chats.\n            //It checks existing 'message yourself' chat.\n            if (isMessageYourselfExists == 2) {\n                messageYourselfChatID = existingChat.chatId;\n            }\n            //Creates new 'message yourself' chat.\n            if (auth?.currentUser?.email == user.data().email) {\n                navigationChatID = '';\n            }\n        });\n\n        if (messageYourselfChatID != '') {\n            navigation.navigate('Chat', { id: messageYourselfChatID, chatName: handleName(user) });\n        } else if (navigationChatID != '') {\n            navigation.navigate('Chat', { id: navigationChatID, chatName: handleName(user) });\n        } else {\n            //Creates new chat\n            const newRef = doc(collection(database, \"chats\"));\n            setDoc(newRef, {\n                lastUpdated: Date.now(),\n                groupName: '', //It is not a group chat\n                users: [\n                    { email: auth?.currentUser?.email, name: auth?.currentUser?.displayName, deletedFromChat: false },\n                    { email: user.data().email, name: user.data().name, deletedFromChat: false }\n                ],\n                lastAccess: [\n                    { email: auth?.currentUser?.email, date: Date.now(), },\n                    { email: user.data().email, date: '', }],\n                messages: []\n            }).then(\n                navigation.navigate('Chat', { id: newRef.id, chatName: handleName(user) })\n            );\n        }\n\n    }\n\n    function handleSubtitle(user) {\n        if (user.data().email == auth?.currentUser?.email) {\n            return 'Message yourself';\n        } else {\n            return 'User status';\n        }\n    }\n\n    function handleName(user) {\n        if (user.data().name) {\n            if (user.data().email == auth?.currentUser?.email) {\n                return user.data().name + ('*(You)');\n            }\n            return user.data().name;\n        } else if (user.data().email) {\n\n            return user.data().email;\n        } else {\n            return '~ No Name or Email ~';\n        }\n    }\n\n    return (\n        <SafeAreaView style={styles.container}>\n            <Cell\n                title='New group'\n                icon='people'\n                tintColor={colors.teal}\n                onPress={handleNewGroup}\n                style={{ marginTop: 5 }}\n            />\n            <Cell\n                title='New user'\n                icon='person-add'\n                tintColor={colors.teal}\n                onPress={handleNewUser}\n                style={{ marginBottom: 10 }}\n            />\n\n            {users.length === 0 ? (\n                <View style={styles.blankContainer} >\n                    <Text style={styles.textContainer}>\n                        No registered users yet\n                    </Text>\n                </View>\n            ) : (\n                <ScrollView>\n                    <View>\n                        <Text style={styles.textContainer}>\n                            Registered users\n                        </Text>\n                    </View>\n                    {users.map(user => (\n                        <React.Fragment key={user.id}>\n                            <ContactRow\n                                name={handleName(user)}\n                                subtitle={handleSubtitle(user)}\n                                onPress={() => handleNavigate(user)}\n                                showForwardIcon={false}\n                            />\n                        </React.Fragment>\n                    ))}\n                </ScrollView>\n            )}\n        </SafeAreaView>\n    )\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1\n    },\n    blankContainer: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    textContainer: {\n        marginLeft: 16,\n        fontSize: 16,\n        fontWeight: 300\n    }\n})\nexport default Users;"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAAC,OAAAC,YAAA;AAAA,OAAAC,UAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,UAAA;AAEhE,SAASC,aAAa,EAAEC,QAAQ,QAAQ,0BAA0B;AAClE,OAAOC,UAAU,MAAM,0BAA0B;AACjD,OAAOC,SAAS,MAAM,yBAAyB;AAC/C,SAASC,IAAI,EAAEC,QAAQ,QAAQ,oBAAoB;AACnD,SAASC,UAAU,EAAEC,GAAG,EAAEC,UAAU,EAAEC,MAAM,EAAEC,KAAK,EAAEC,OAAO,EAAEC,KAAK,QAAQ,oBAAoB;AAC/F,SAASC,MAAM,QAAQ,qBAAqB;AAC5C,OAAOC,IAAI,MAAM,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtC,IAAMC,KAAK,GAAG,SAARA,KAAKA,CAAA,EAAS;EAChB,IAAMC,UAAU,GAAGlB,aAAa,CAAC,CAAC;EAClC,IAAAmB,SAAA,GAA0B3B,QAAQ,CAAC,EAAE,CAAC;IAAA4B,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA/BG,KAAK,GAAAF,UAAA;IAAEG,QAAQ,GAAAH,UAAA;EACtB,IAAAI,UAAA,GAA0ChC,QAAQ,CAAC,EAAE,CAAC;IAAAiC,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAA/CE,aAAa,GAAAD,UAAA;IAAEE,gBAAgB,GAAAF,UAAA;EAEtChC,SAAS,CAAC,YAAM;IAAA,IAAAmC,iBAAA,EAAAC,kBAAA;IACZ,IAAMC,iBAAiB,GAAGxB,UAAU,CAACD,QAAQ,EAAE,OAAO,CAAC;IACvD,IAAM0B,CAAC,GAAGrB,KAAK,CAACoB,iBAAiB,EAAEnB,OAAO,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IAC1DH,UAAU,CAACuB,CAAC,EAAE,UAACxB,GAAG,EAAK;MACnBgB,QAAQ,CAAChB,GAAG,CAACyB,IAAI,CAAC;IACtB,CAAC,CAAC;IAIF,IAAMC,kBAAkB,GAAG3B,UAAU,CAACD,QAAQ,EAAE,OAAO,CAAC;IACxD,IAAM6B,EAAE,GAAGxB,KAAK,CAACuB,kBAAkB,EAC/BrB,KAAK,CAAC,OAAO,EAAE,gBAAgB,EAAE;MAAEuB,KAAK,EAAE/B,IAAI,qBAAAwB,iBAAA,GAAJxB,IAAI,CAAEgC,WAAW,qBAAjBR,iBAAA,CAAmBO,KAAK;MAAEE,IAAI,EAAEjC,IAAI,qBAAAyB,kBAAA,GAAJzB,IAAI,CAAEgC,WAAW,qBAAjBP,kBAAA,CAAmBS,WAAW;MAAEC,eAAe,EAAE;IAAM,CAAC,CAAC,EACnI3B,KAAK,CAAC,WAAW,EAAE,IAAI,EAAE,EAAE,CAC/B,CAAC;IACDJ,UAAU,CAAC0B,EAAE,EAAE,UAAC3B,GAAG,EAAK;MACpBA,GAAG,CAACyB,IAAI,CAACQ,GAAG,CAAC,UAAAC,YAAY,EAAI;QACzB,IAAI,CAACf,aAAa,CAACgB,IAAI,CAAC,UAAAC,CAAC;UAAA,OAAIA,CAAC,CAACC,MAAM,KAAKH,YAAY,CAACI,EAAE;QAAA,EAAC,EAAE;UACxDnB,aAAa,CAACoB,IAAI,CAAC;YAAEF,MAAM,EAAEH,YAAY,CAACI,EAAE;YAAEE,UAAU,EAAEN,YAAY,CAACO,IAAI,CAAC,CAAC,CAAC1B;UAAM,CAAC,CAAC;QAC1F;MACJ,CAAC,CAAC;MACFK,gBAAgB,CAACD,aAAa,CAAC;IACnC,CAAC,CAAC;EAEN,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMuB,cAAc,GAAG,SAAjBA,cAAcA,CAAA,EAAS;IACzB/B,UAAU,CAACgC,QAAQ,CAAC,OAAO,CAAC;EAChC,CAAC;EAED,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAS;IACxBC,KAAK,CAAC,UAAU,CAAC;EACrB,CAAC;EAED,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAIC,IAAI,EAAK;IAC7B,IAAIC,gBAAgB,GAAG,EAAE;IACzB,IAAIC,qBAAqB,GAAG,EAAE;IAE9B9B,aAAa,CAACc,GAAG,CAAC,UAAAC,YAAY,EAAI;MAAA,IAAAgB,kBAAA;MAG9B,IAAIC,sBAAsB,GAAG,KAAK;MAClC,IAAIC,uBAAuB,GAAG,CAAC;MAC/BlB,YAAY,CAACM,UAAU,CAACP,GAAG,CAAC,UAACG,CAAC,EAAK;QAAA,IAAAiB,kBAAA;QAC/B,IAAIjB,CAAC,CAACR,KAAK,KAAI/B,IAAI,qBAAAwD,kBAAA,GAAJxD,IAAI,CAAEgC,WAAW,qBAAjBwB,kBAAA,CAAmBzB,KAAK,GAAE;UACrCuB,sBAAsB,GAAG,IAAI;QACjC;QAGA,IAAIf,CAAC,CAACR,KAAK,IAAImB,IAAI,CAACN,IAAI,CAAC,CAAC,CAACb,KAAK,EAAE;UAC9BwB,uBAAuB,EAAE;QAC7B;MACJ,CAAC,CAAC;MAIFlB,YAAY,CAACM,UAAU,CAACP,GAAG,CAAC,UAACG,CAAC,EAAK;QAC/B,IAAIe,sBAAsB,IAAIf,CAAC,CAACR,KAAK,IAAImB,IAAI,CAACN,IAAI,CAAC,CAAC,CAACb,KAAK,EAAE;UACxDoB,gBAAgB,GAAGd,YAAY,CAACG,MAAM;QAC1C;MACJ,CAAC,CAAC;MAIF,IAAIe,uBAAuB,IAAI,CAAC,EAAE;QAC9BH,qBAAqB,GAAGf,YAAY,CAACG,MAAM;MAC/C;MAEA,IAAI,CAAAxC,IAAI,qBAAAqD,kBAAA,GAAJrD,IAAI,CAAEgC,WAAW,qBAAjBqB,kBAAA,CAAmBtB,KAAK,KAAImB,IAAI,CAACN,IAAI,CAAC,CAAC,CAACb,KAAK,EAAE;QAC/CoB,gBAAgB,GAAG,EAAE;MACzB;IACJ,CAAC,CAAC;IAEF,IAAIC,qBAAqB,IAAI,EAAE,EAAE;MAC7BtC,UAAU,CAACgC,QAAQ,CAAC,MAAM,EAAE;QAAEL,EAAE,EAAEW,qBAAqB;QAAEK,QAAQ,EAAEC,UAAU,CAACR,IAAI;MAAE,CAAC,CAAC;IAC1F,CAAC,MAAM,IAAIC,gBAAgB,IAAI,EAAE,EAAE;MAC/BrC,UAAU,CAACgC,QAAQ,CAAC,MAAM,EAAE;QAAEL,EAAE,EAAEU,gBAAgB;QAAEM,QAAQ,EAAEC,UAAU,CAACR,IAAI;MAAE,CAAC,CAAC;IACrF,CAAC,MAAM;MAAA,IAAAS,kBAAA,EAAAC,kBAAA,EAAAC,kBAAA;MAEH,IAAMC,MAAM,GAAG3D,GAAG,CAACD,UAAU,CAACD,QAAQ,EAAE,OAAO,CAAC,CAAC;MACjDI,MAAM,CAACyD,MAAM,EAAE;QACXC,WAAW,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC;QACvBC,SAAS,EAAE,EAAE;QACbhD,KAAK,EAAE,CACH;UAAEa,KAAK,EAAE/B,IAAI,qBAAA2D,kBAAA,GAAJ3D,IAAI,CAAEgC,WAAW,qBAAjB2B,kBAAA,CAAmB5B,KAAK;UAAEE,IAAI,EAAEjC,IAAI,qBAAA4D,kBAAA,GAAJ5D,IAAI,CAAEgC,WAAW,qBAAjB4B,kBAAA,CAAmB1B,WAAW;UAAEC,eAAe,EAAE;QAAM,CAAC,EACjG;UAAEJ,KAAK,EAAEmB,IAAI,CAACN,IAAI,CAAC,CAAC,CAACb,KAAK;UAAEE,IAAI,EAAEiB,IAAI,CAACN,IAAI,CAAC,CAAC,CAACX,IAAI;UAAEE,eAAe,EAAE;QAAM,CAAC,CAC/E;QACDgC,UAAU,EAAE,CACR;UAAEpC,KAAK,EAAE/B,IAAI,qBAAA6D,kBAAA,GAAJ7D,IAAI,CAAEgC,WAAW,qBAAjB6B,kBAAA,CAAmB9B,KAAK;UAAEqC,IAAI,EAAEJ,IAAI,CAACC,GAAG,CAAC;QAAG,CAAC,EACtD;UAAElC,KAAK,EAAEmB,IAAI,CAACN,IAAI,CAAC,CAAC,CAACb,KAAK;UAAEqC,IAAI,EAAE;QAAI,CAAC,CAAC;QAC5CC,QAAQ,EAAE;MACd,CAAC,CAAC,CAACC,IAAI,CACHxD,UAAU,CAACgC,QAAQ,CAAC,MAAM,EAAE;QAAEL,EAAE,EAAEqB,MAAM,CAACrB,EAAE;QAAEgB,QAAQ,EAAEC,UAAU,CAACR,IAAI;MAAE,CAAC,CAC7E,CAAC;IACL;EAEJ,CAAC;EAED,SAASqB,cAAcA,CAACrB,IAAI,EAAE;IAAA,IAAAsB,kBAAA;IAC1B,IAAItB,IAAI,CAACN,IAAI,CAAC,CAAC,CAACb,KAAK,KAAI/B,IAAI,qBAAAwE,kBAAA,GAAJxE,IAAI,CAAEgC,WAAW,qBAAjBwC,kBAAA,CAAmBzC,KAAK,GAAE;MAC/C,OAAO,kBAAkB;IAC7B,CAAC,MAAM;MACH,OAAO,aAAa;IACxB;EACJ;EAEA,SAAS2B,UAAUA,CAACR,IAAI,EAAE;IACtB,IAAIA,IAAI,CAACN,IAAI,CAAC,CAAC,CAACX,IAAI,EAAE;MAAA,IAAAwC,kBAAA;MAClB,IAAIvB,IAAI,CAACN,IAAI,CAAC,CAAC,CAACb,KAAK,KAAI/B,IAAI,qBAAAyE,kBAAA,GAAJzE,IAAI,CAAEgC,WAAW,qBAAjByC,kBAAA,CAAmB1C,KAAK,GAAE;QAC/C,OAAOmB,IAAI,CAACN,IAAI,CAAC,CAAC,CAACX,IAAI,GAAI,QAAS;MACxC;MACA,OAAOiB,IAAI,CAACN,IAAI,CAAC,CAAC,CAACX,IAAI;IAC3B,CAAC,MAAM,IAAIiB,IAAI,CAACN,IAAI,CAAC,CAAC,CAACb,KAAK,EAAE;MAE1B,OAAOmB,IAAI,CAACN,IAAI,CAAC,CAAC,CAACb,KAAK;IAC5B,CAAC,MAAM;MACH,OAAO,sBAAsB;IACjC;EACJ;EAEA,OACInB,OAAA,CAACrB,YAAY;IAACmF,KAAK,EAAEC,MAAM,CAACC,SAAU;IAAAC,QAAA,GAClCjE,OAAA,CAACF,IAAI;MACDoE,KAAK,EAAC,WAAW;MACjBC,IAAI,EAAC,QAAQ;MACbC,SAAS,EAAEvE,MAAM,CAACwE,IAAK;MACvBC,OAAO,EAAErC,cAAe;MACxB6B,KAAK,EAAE;QAAES,SAAS,EAAE;MAAE;IAAE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,GAAAC,KAC3B,CAAC,EACF5E,OAAA,CAACF,IAAI;MACDoE,KAAK,EAAC,UAAU;MAChBC,IAAI,EAAC,YAAY;MACjBC,SAAS,EAAEvE,MAAM,CAACwE,IAAK;MACvBC,OAAO,EAAEnC,aAAc;MACvB2B,KAAK,EAAE;QAAEe,YAAY,EAAE;MAAG;IAAE;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,GAAAC,KAC/B,CAAC,EAEDtE,KAAK,CAACwE,MAAM,KAAK,CAAC,GACf9E,OAAA,CAACnB,IAAI;MAACiF,KAAK,EAAEC,MAAM,CAACgB,cAAe;MAAAd,QAAA,EAC/BjE,OAAA,CAAClB,IAAI;QAACgF,KAAK,EAAEC,MAAM,CAACiB,aAAc;QAAAf,QAAA,EAAC;MAEnC;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,GAAAC,KAAM;IAAC;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,GAAAC,KACL,CAAC,GAEP5E,OAAA,CAACjB,UAAU;MAAAkF,QAAA,GACPjE,OAAA,CAACnB,IAAI;QAAAoF,QAAA,EACDjE,OAAA,CAAClB,IAAI;UAACgF,KAAK,EAAEC,MAAM,CAACiB,aAAc;UAAAf,QAAA,EAAC;QAEnC;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,GAAAC,KAAM;MAAC;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,GAAAC,KACL,CAAC,EACNtE,KAAK,CAACkB,GAAG,CAAC,UAAAc,IAAI;QAAA,OACXtC,OAAA,CAACzB,KAAK,CAAC0G,QAAQ;UAAAhB,QAAA,EACXjE,OAAA,CAACd,UAAU;YACPmC,IAAI,EAAEyB,UAAU,CAACR,IAAI,CAAE;YACvB4C,QAAQ,EAAEvB,cAAc,CAACrB,IAAI,CAAE;YAC/BgC,OAAO,EAAE,SAAAA,QAAA;cAAA,OAAMjC,cAAc,CAACC,IAAI,CAAC;YAAA,CAAC;YACpC6C,eAAe,EAAE;UAAM;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,GAAAC,KAC1B;QAAC,GANetC,IAAI,CAACT,EAAE;UAAA2C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,GAAAC,KAOZ,CAAC;MAAA,CACpB,CAAC;IAAA;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,GAAAC,KACM,CACf;EAAA;IAAAJ,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,GAAAC,KACS,CAAC;AAEvB,CAAC;AAED,IAAMb,MAAM,GAAGnF,UAAU,CAACwG,MAAM,CAAC;EAC7BpB,SAAS,EAAE;IACPqB,IAAI,EAAE;EACV,CAAC;EACDN,cAAc,EAAE;IACZM,IAAI,EAAE,CAAC;IACPC,cAAc,EAAE,QAAQ;IACxBC,UAAU,EAAE;EAChB,CAAC;EACDP,aAAa,EAAE;IACXQ,UAAU,EAAE,EAAE;IACdC,QAAQ,EAAE,EAAE;IACZC,UAAU,EAAE;EAChB;AACJ,CAAC,CAAC;AACF,eAAezF,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}